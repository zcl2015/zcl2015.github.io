
 <!DOCTYPE HTML>
<html >
<head>
  <meta charset="UTF-8">
  
    <title>SelfBlog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="赵成龙">
    

    
    <meta property="og:type" content="website">
<meta property="og:title" content="SelfBlog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="SelfBlog">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="SelfBlog">

    
    <link rel="alternative" href="/atom.xml" title="SelfBlog" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="SelfBlog" title="SelfBlog"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="SelfBlog">SelfBlog</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="Menu">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="Search" />
						<input type="hidden" name="q" value="site:yoursite.com">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2018/06/07/Servlet会话追踪/" title="Servlet会话追踪" itemprop="url">Servlet会话追踪</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="赵成龙" target="_blank" itemprop="author">赵成龙</a>
		
  <p class="article-time">
    <time datetime="2018-06-07T11:06:45.000Z" itemprop="datePublished"> Published 2018-06-07</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>此处主要记录Servlet的会话追踪以及与会话追踪相关的几种方法。</p>
<h2 id="会话追踪"><a href="#会话追踪" class="headerlink" title="会话追踪"></a>会话追踪</h2><h3 id="什么是会话追踪"><a href="#什么是会话追踪" class="headerlink" title="什么是会话追踪"></a>什么是会话追踪</h3><p><strong>会话只是指一段指定的时间间隔。</strong><br><strong>会话跟踪是维护用户状态(数据)的一种方式</strong>。它也被称为servlet中的会话管理。</p>
<p><strong>Http协议是一个无状态的</strong>，所以我们需要<strong>使用会话跟踪技术来维护用户状态。</strong> 每次用户请求服务器时，服务器将请求视为新请求。 所以需要保持一个用户的状态来识别特定的用户。</p>
<p>可以参考下图：</p>
<p><img src="https://s1.ax1x.com/2018/06/07/CHgb9O.jpg" alt="CHgb9O.jpg"></p>
<h3 id="会话追踪实现的几种方法"><a href="#会话追踪实现的几种方法" class="headerlink" title="会话追踪实现的几种方法"></a>会话追踪实现的几种方法</h3><ol>
<li>Cookies</li>
<li>隐藏表格域</li>
<li>网址重写</li>
<li>HttpSession</li>
</ol>
<h2 id="Cookies"><a href="#Cookies" class="headerlink" title="Cookies"></a>Cookies</h2><h3 id="什么是Cookie"><a href="#什么是Cookie" class="headerlink" title="什么是Cookie"></a>什么是Cookie</h3><p>Cookie是在<strong>多个客户端请求之间持久存储的一小段信息</strong>。<br>Cookie具有名称，单个值和可选属性，例如注释，路径和域限定符，生存周期和版本号。</p>
<h3 id="Cookie的类型"><a href="#Cookie的类型" class="headerlink" title="Cookie的类型"></a>Cookie的类型</h3><ol>
<li>非持久性cookie（它仅适用于单个会话。当用户关闭浏览器时都会删除它。）</li>
<li>持久性Cookie（它对多个会话有效。当用户关闭浏览器时也不会删除它。只有在用户注销或注销时才被删除。）<br>非持久性和持久性Cookie优点类似与登陆时浏览器提示是否保存密码，如果没有保存，关掉浏览器后下一次还需要登陆。而保存后再次打开浏览器也可以直接使用。</li>
</ol>
<h3 id="Cookie类以及方法介绍"><a href="#Cookie类以及方法介绍" class="headerlink" title="Cookie类以及方法介绍"></a>Cookie类以及方法介绍</h3><p>javax.servlet.http.Cookie类提供了使用Cookie的功能。它为Cookie提供了很多有用的方法。</p>
<p>Cookie类的构造方法包括：Cookie()  Cookie(String name, String value)<br>Cookie类的方法包括：<br><img src="https://s1.ax1x.com/2018/06/08/CbpY1U.png" alt="CbpY1U.png"></p>
<h3 id="使用Cookie类所需的其他接口以及方法"><a href="#使用Cookie类所需的其他接口以及方法" class="headerlink" title="使用Cookie类所需的其他接口以及方法"></a>使用Cookie类所需的其他接口以及方法</h3><p><img src="https://s1.ax1x.com/2018/06/08/Cbpw7R.png" alt="Cbpw7R.png"></p>
<h3 id="创建Cookie-删除Cookie-获取Cookie"><a href="#创建Cookie-删除Cookie-获取Cookie" class="headerlink" title="创建Cookie  删除Cookie 获取Cookie"></a>创建Cookie  删除Cookie 获取Cookie</h3><p>创建Cookie的代码示例如下：(由HttpServletResponse接口)</p>
<pre><code>Cookie ck=new Cookie(&quot;user&quot;,&quot;maxsu jaiswal&quot;);   //creating cookie object  
response.addCookie(ck);//adding cookie in the response
</code></pre><p>获取Cookie代码示例如下：(由HttpServletRequest接口)</p>
<pre><code>Cookie ck[]=request.getCookies();  
for(int i=0;i&lt;ck.length;i++){  
out.print(&quot;&lt;br&gt;&quot;+ck[i].getName()+&quot; &quot;+ck[i].getValue());  
}
</code></pre><p>删除Cookie代码示例如下：（使用Cookie类自己的方法）</p>
<pre><code>Cookie ck=new Cookie(&quot;user&quot;,&quot;&quot;);//deleting value of cookie  
ck.setMaxAge(0);//changing the maximum age to 0 seconds  
response.addCookie(ck);//adding cookie in the response
</code></pre><h2 id="Cookie使用入门实例"><a href="#Cookie使用入门实例" class="headerlink" title="Cookie使用入门实例"></a>Cookie使用入门实例</h2><p>背景： 在初始页面中提交信息，在第一个Servlet中设定Cookie并在第二个Servlet中展示Cookie信息。</p>
<h3 id="index-html"><a href="#index-html" class="headerlink" title="index.html"></a>index.html</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">&lt;title&gt;Cookies In Servlet&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div style=&quot;text-align:center;&quot;&gt;</span><br><span class="line">        &lt;form action=&quot;FirstServletUrl&quot; method=&quot;post&quot;&gt;</span><br><span class="line">            用户名：&lt;input type=&quot;text&quot; name=&quot;username&quot; value=&quot;Maxsu&quot;/&gt;</span><br><span class="line">        &lt;input type=&quot;submit&quot; value=&quot;提交&quot; /&gt;</span><br><span class="line">        &lt;/form&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h3 id="web-xml-配置文件"><a href="#web-xml-配置文件" class="headerlink" title="web.xml 配置文件"></a>web.xml 配置文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;servlet&gt;</span><br><span class="line">   &lt;servlet-name&gt;FirstServlet&lt;/servlet-name&gt;</span><br><span class="line">   &lt;servlet-class&gt;com.FirstCookie.FirstServlet&lt;/servlet-class&gt;</span><br><span class="line"> &lt;/servlet&gt;</span><br><span class="line"> &lt;servlet-mapping&gt;</span><br><span class="line">   &lt;servlet-name&gt;FirstServlet&lt;/servlet-name&gt;</span><br><span class="line">   &lt;url-pattern&gt;/FirstServletUrl&lt;/url-pattern&gt;</span><br><span class="line"> &lt;/servlet-mapping&gt;</span><br><span class="line"> &lt;servlet&gt;</span><br><span class="line">   &lt;servlet-name&gt;SecondServlet&lt;/servlet-name&gt;</span><br><span class="line">   &lt;servlet-class&gt;com.FirstCookie.SecondServlet&lt;/servlet-class&gt;</span><br><span class="line"> &lt;/servlet&gt;</span><br><span class="line"> &lt;servlet-mapping&gt;</span><br><span class="line">   &lt;servlet-name&gt;SecondServlet&lt;/servlet-name&gt;</span><br><span class="line">   &lt;url-pattern&gt;/SecondServletUrl&lt;/url-pattern&gt;</span><br><span class="line"> &lt;/servlet-mapping&gt;</span><br></pre></td></tr></table></figure>
<h3 id="Servlet代码"><a href="#Servlet代码" class="headerlink" title="Servlet代码"></a>Servlet代码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">package com.FirstCookie;</span><br><span class="line">import java.io.*;</span><br><span class="line">import javax.servlet.http.*;</span><br><span class="line">public class FirstServlet extends HttpServlet &#123;</span><br><span class="line">	private static final long serialVersionUID = 1L;</span><br><span class="line">    public void doPost(HttpServletRequest request, HttpServletResponse response) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            response.setCharacterEncoding(&quot;UTF-8&quot;);</span><br><span class="line">            response.setContentType(&quot;text/html&quot;);</span><br><span class="line">            PrintWriter out = response.getWriter();</span><br><span class="line">            // 获取初始页面中提交的信息</span><br><span class="line">            String name = request.getParameter(&quot;username&quot;);</span><br><span class="line">            String username = new String(name.getBytes(&quot;ISO-8859-1&quot;),&quot;utf-8&quot;);</span><br><span class="line">            out.print(&quot;欢迎您, &quot; + username);</span><br><span class="line">            // 设置Cookie</span><br><span class="line">            Cookie ck = new Cookie(&quot;uname&quot;, username);// creating cookie object</span><br><span class="line">            response.addCookie(ck);// adding cookie in the response</span><br><span class="line">            // 提交表单</span><br><span class="line">            out.print(&quot;&lt;form action=&apos;SecondServletUrl&apos; method=&apos;post&apos;&gt;&quot;);</span><br><span class="line">            out.print(&quot;&lt;p&gt;Cookies已在浏览器中设置，现在跳转到第二个Servlet中读取Cookies的值。&lt;/p&gt;&quot;);</span><br><span class="line">            out.print(&quot;&lt;input type=&apos;submit&apos; value=&apos;提交到第二个Servlet&apos;&gt;&quot;);</span><br><span class="line">            out.print(&quot;&lt;/form&gt;&quot;);</span><br><span class="line">            out.close();</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            System.out.println(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">package com.FirstCookie;</span><br><span class="line">import java.io.PrintWriter;</span><br><span class="line">import javax.servlet.http.Cookie;</span><br><span class="line">import javax.servlet.http.*;</span><br><span class="line">public class SecondServlet extends HttpServlet &#123;</span><br><span class="line">    private static final long serialVersionUID = 1L;</span><br><span class="line">    public void doPost(HttpServletRequest request, HttpServletResponse response) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            response.setCharacterEncoding(&quot;UTF-8&quot;);</span><br><span class="line">            response.setContentType(&quot;text/html&quot;);</span><br><span class="line">            PrintWriter out = response.getWriter();</span><br><span class="line">           // 获取Cookie 数组信息</span><br><span class="line">            Cookie ck[] = request.getCookies();</span><br><span class="line">            out.print(&quot;Hello &quot; + ck[0].getValue());</span><br><span class="line">            out.close();</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            System.out.println(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="运行结果"><a href="#运行结果" class="headerlink" title="运行结果"></a>运行结果</h3><p><img src="https://s1.ax1x.com/2018/06/08/CbkQ74.png" alt="CbkQ74.png"></p>
<p><img src="https://s1.ax1x.com/2018/06/08/CbkNjK.png" alt="CbkNjK.png"></p>
<p><img src="https://s1.ax1x.com/2018/06/08/Cbkr4A.png" alt="Cbkr4A.png"></p>
<h2 id="Servlet登录注销Cookies实例-这个使用更加常见"><a href="#Servlet登录注销Cookies实例-这个使用更加常见" class="headerlink" title="Servlet登录注销Cookies实例(这个使用更加常见)"></a>Servlet登录注销Cookies实例(这个使用更加常见)</h2><p>样例背景：在这个例子中，我们创建了3个链接：登录，注销和用户资料。<br>          用户在未登录之前不能进入个人资料页面。如果用户已经注销，则需要再次登录才能访问个人资料。</p>
<h3 id="indexLogin-html-（默认欢迎页面）"><a href="#indexLogin-html-（默认欢迎页面）" class="headerlink" title="indexLogin.html （默认欢迎页面）"></a>indexLogin.html （默认欢迎页面）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">&lt;title&gt;使用Cookie登录应用程序&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body style=&quot;text-algin: center;&quot;&gt;</span><br><span class="line">    &lt;h2&gt;欢迎使用Cookie登录应用程序&lt;/h2&gt;</span><br><span class="line">    &lt;a href=&quot;login.html&quot;&gt;登录&lt;/a&gt;|</span><br><span class="line">    &lt;a href=&quot;LogoutServletUrl&quot;&gt;注销&lt;/a&gt;|</span><br><span class="line">    &lt;a href=&quot;ProfileServletUrl&quot;&gt;个人信息&lt;/a&gt;</span><br><span class="line">    &lt;a href=&quot;http://www.baidu.com&quot;&gt;百度一下&lt;/a&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h3 id="其他几个相关的html文件"><a href="#其他几个相关的html文件" class="headerlink" title="其他几个相关的html文件"></a>其他几个相关的html文件</h3><p><strong>登陆页面：login.html</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">&lt;title&gt;登陆界面&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"> &lt;div style=&quot;text-algin: center;&quot;&gt;</span><br><span class="line">        &lt;form action=&quot;LoginServletUrl&quot; method=&quot;post&quot;&gt;</span><br><span class="line">            username：&lt;input type=&quot;text&quot; name=&quot;name&quot;&gt;  </span><br><span class="line">            password：&lt;input type=&quot;password&quot; name=&quot;password&quot;&gt;</span><br><span class="line">           &lt;input type=&quot;submit&quot; value=&quot;login&quot;&gt;</span><br><span class="line">        &lt;/form&gt;</span><br><span class="line"> &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p> <strong>链接页面：link.html (为了更好的显示注销后无法查看个人信息)</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">&lt;title&gt;link&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"> &lt;a href=&quot;login.html&quot;&gt;登陆&lt;/a&gt;|</span><br><span class="line"> &lt;a href=&quot;LogoutServletUrl&quot;&gt;注销&lt;/a&gt;|</span><br><span class="line"> &lt;a href=&quot;ProfileServletUrl&quot;&gt;个人信息&lt;/a&gt;</span><br><span class="line">&lt;hr&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h3 id="web-xml文件配置"><a href="#web-xml文件配置" class="headerlink" title="web.xml文件配置"></a>web.xml文件配置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"> &lt;servlet&gt;</span><br><span class="line">        &lt;servlet-name&gt;LoginServlet&lt;/servlet-name&gt;</span><br><span class="line">        &lt;servlet-class&gt;com.LoginWithCookie.LoginServlet&lt;/servlet-class&gt;</span><br><span class="line">&lt;/servlet&gt;</span><br><span class="line">    &lt;servlet-mapping&gt;</span><br><span class="line">        &lt;servlet-name&gt;LoginServlet&lt;/servlet-name&gt;</span><br><span class="line">        &lt;url-pattern&gt;/LoginServletUrl&lt;/url-pattern&gt;</span><br><span class="line">    &lt;/servlet-mapping&gt;</span><br><span class="line">&lt;servlet&gt;</span><br><span class="line">        &lt;servlet-name&gt;LogoutServlet&lt;/servlet-name&gt;</span><br><span class="line">        &lt;servlet-class&gt;com.LoginWithCookie.LogoutServlet&lt;/servlet-class&gt;</span><br><span class="line">&lt;/servlet&gt;</span><br><span class="line">&lt;servlet-mapping&gt;</span><br><span class="line">        &lt;servlet-name&gt;LogoutServlet&lt;/servlet-name&gt;</span><br><span class="line">        &lt;url-pattern&gt;/LogoutServletUrl&lt;/url-pattern&gt;</span><br><span class="line">&lt;/servlet-mapping&gt;</span><br><span class="line">&lt;servlet&gt;</span><br><span class="line">        &lt;servlet-name&gt;ProfileServlet&lt;/servlet-name&gt;</span><br><span class="line">        &lt;servlet-class&gt;com.LoginWithCookie.ProfileServlet&lt;/servlet-class&gt;</span><br><span class="line">&lt;/servlet&gt;</span><br><span class="line">&lt;servlet-mapping&gt;</span><br><span class="line">        &lt;servlet-name&gt;ProfileServlet&lt;/servlet-name&gt;</span><br><span class="line">        &lt;url-pattern&gt;/ProfileServletUrl&lt;/url-pattern&gt;</span><br><span class="line">&lt;/servlet-mapping&gt;</span><br></pre></td></tr></table></figure>
<h3 id="Servlet-代码"><a href="#Servlet-代码" class="headerlink" title="Servlet 代码"></a>Servlet 代码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">package com.LoginWithCookie;</span><br><span class="line">import java.io.*;</span><br><span class="line">import javax.servlet.ServletException;</span><br><span class="line">import javax.servlet.http.*;</span><br><span class="line"></span><br><span class="line">public class LoginServlet extends HttpServlet &#123;</span><br><span class="line">    </span><br><span class="line">	private static final long serialVersionUID = 1L;</span><br><span class="line"></span><br><span class="line">	protected void doPost(HttpServletRequest request, HttpServletResponse response)</span><br><span class="line">            throws ServletException, IOException &#123;</span><br><span class="line">        response.setCharacterEncoding(&quot;UTF-8&quot;);  </span><br><span class="line">        response.setContentType(&quot;text/html;charset=UTF-8&quot;); </span><br><span class="line">        request.setCharacterEncoding(&quot;UTF-8&quot;);  </span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">        // 设定请求转发的页面（无论是否登陆成功）</span><br><span class="line">        request.getRequestDispatcher(&quot;link.html&quot;).include(request, response);</span><br><span class="line"></span><br><span class="line">        String name = request.getParameter(&quot;name&quot;);</span><br><span class="line">        String password = request.getParameter(&quot;password&quot;);</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">        if (name.equals(&quot;admin&quot;) &amp;&amp; password.equals(&quot;123456&quot;)) &#123;</span><br><span class="line">            out.print(&quot;您已成功登录系统!&quot;);</span><br><span class="line">            out.print(&quot;&lt;br&gt;欢迎您, &quot; + name);</span><br><span class="line">            Cookie ck = new Cookie(&quot;name&quot;, name);</span><br><span class="line">            response.addCookie(ck);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            out.print(&quot;&lt;font style=&apos;color:red;&apos;&gt;用户名或密码错误!&lt;/font&gt;&quot;);</span><br><span class="line">            // 设置请求转发的页面</span><br><span class="line">            request.getRequestDispatcher(&quot;login.html&quot;).include(request, response);</span><br><span class="line">        &#125;</span><br><span class="line">        out.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">package com.LoginWithCookie;</span><br><span class="line">import java.io.*;</span><br><span class="line">import javax.servlet.ServletException;</span><br><span class="line">import javax.servlet.http.*;</span><br><span class="line">public class LogoutServlet extends HttpServlet &#123;</span><br><span class="line">    private static final long serialVersionUID = 1L;</span><br><span class="line">    protected void doGet(HttpServletRequest request, HttpServletResponse response)</span><br><span class="line">            throws ServletException, IOException &#123;</span><br><span class="line">        response.setCharacterEncoding(&quot;UTF-8&quot;);  </span><br><span class="line">        response.setContentType(&quot;text/html;charset=UTF-8&quot;); </span><br><span class="line">        request.setCharacterEncoding(&quot;UTF-8&quot;);  </span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">        request.getRequestDispatcher(&quot;link.html&quot;).include(request, response);</span><br><span class="line">        // 删除Cookie</span><br><span class="line">        Cookie ck = new Cookie(&quot;name&quot;, &quot;&quot;);</span><br><span class="line">        ck.setMaxAge(0);</span><br><span class="line">        response.addCookie(ck);</span><br><span class="line"></span><br><span class="line">        out.print(&quot;您已成功注销!&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">package com.LoginWithCookie;</span><br><span class="line">import java.io.*;</span><br><span class="line">mport javax.servlet.ServletException;</span><br><span class="line">import javax.servlet.http.*;</span><br><span class="line">public class ProfileServlet extends HttpServlet &#123;</span><br><span class="line">    private static final long serialVersionUID = 1L;</span><br><span class="line">    protected void doGet(HttpServletRequest request, HttpServletResponse response)</span><br><span class="line">            throws ServletException, IOException &#123;</span><br><span class="line">        response.setCharacterEncoding(&quot;UTF-8&quot;);</span><br><span class="line">        response.setContentType(&quot;text/html;charset=UTF-8&quot;);</span><br><span class="line">        request.setCharacterEncoding(&quot;UTF-8&quot;);</span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">        request.getRequestDispatcher(&quot;link.html&quot;).include(request, response);</span><br><span class="line">       // 获取Cookie</span><br><span class="line">        Cookie ck[] = request.getCookies();</span><br><span class="line">        if (ck != null) &#123;</span><br><span class="line">            String name = ck[0].getValue();</span><br><span class="line">            if (!name.equals(&quot;&quot;) || name != null) &#123;</span><br><span class="line">                out.print(&quot;&lt;b&gt;欢迎您来到个人信息中心&lt;/b&gt;&quot;);</span><br><span class="line">                out.print(&quot;&lt;br&gt;您好, &quot; + name);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            out.print(&quot;&lt;font style=&apos;color:red;&apos;&gt;请先登录!&lt;/font&gt;&quot;);</span><br><span class="line">            request.getRequestDispatcher(&quot;login.html&quot;).include(request, response);</span><br><span class="line">        &#125;</span><br><span class="line">        out.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="运行结果-1"><a href="#运行结果-1" class="headerlink" title="运行结果"></a>运行结果</h3><p><img src="https://s1.ax1x.com/2018/06/08/CbZpCj.png" alt="CbZpCj.png"></p>
<p>只要注销或者是未登录就不会看到个人信息。</p>
<h2 id="隐藏表单域"><a href="#隐藏表单域" class="headerlink" title="隐藏表单域"></a>隐藏表单域</h2><p>在隐藏表单字段的情况下，一般使用隐藏(不可见)文本字段来维护用户的状态。<br>在这种情况下，我们将信息存储在隐藏字段中，并从另一个servlet获取信息。 </p>
<p>优点：不依赖浏览器（浏览器禁用Cookie无影响）<br>缺点：每个页面需要额外提交表单和字段。（比如下方就是在第一个Servlet中以表单的形式提交给第二个Servlet）</p>
<h3 id="代码示例（基于上方的Cookie入门示例修改）"><a href="#代码示例（基于上方的Cookie入门示例修改）" class="headerlink" title="代码示例（基于上方的Cookie入门示例修改）"></a>代码示例（基于上方的Cookie入门示例修改）</h3><p>修改如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">public class FirstServlet extends HttpServlet &#123;</span><br><span class="line">    public void doPost(HttpServletRequest request, HttpServletResponse response) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            response.setCharacterEncoding(&quot;UTF-8&quot;);</span><br><span class="line">            response.setContentType(&quot;text/html;charset=UTF-8&quot;);</span><br><span class="line">            PrintWriter out = response.getWriter();</span><br><span class="line"></span><br><span class="line">            String n = request.getParameter(&quot;username&quot;);</span><br><span class="line">            out.print(&quot;Welcome &quot; + n)；</span><br><span class="line">            out.print(&quot;&lt;form action=&apos;SecondServletUrl&apos; method=&apos;post&apos;&gt;&quot;);</span><br><span class="line">            // 创建隐藏表单域</span><br><span class="line">            out.print(&quot;&lt;input type=&apos;hidden&apos; name=&apos;username&apos; value=&apos;&quot; + n + &quot;&apos;&gt;&quot;);</span><br><span class="line">            out.print(&quot;&lt;input type=&apos;submit&apos; value=&apos;提交&apos;&gt;&quot;);</span><br><span class="line">            out.print(&quot;&lt;/form&gt;&quot;);</span><br><span class="line">            out.close();</span><br><span class="line">            &#125; catch (Exception e) &#123;</span><br><span class="line">            </span><br><span class="line">            System.out.println(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public class SecondServlet extends HttpServlet &#123;</span><br><span class="line">    public void doPost(HttpServletRequest request, HttpServletResponse response) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            response.setCharacterEncoding(&quot;UTF-8&quot;);</span><br><span class="line">            response.setContentType(&quot;text/html;charset=UTF-8&quot;);</span><br><span class="line">            PrintWriter out = response.getWriter();</span><br><span class="line"></span><br><span class="line">            // 获取隐藏的表单域（和获取一般的数据没有什么区别）</span><br><span class="line">            String n = request.getParameter(&quot;username&quot;);</span><br><span class="line">            out.print(&quot;Hello &quot; + n);</span><br><span class="line">            out.close();</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            System.out.println(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="网址重写"><a href="#网址重写" class="headerlink" title="网址重写"></a>网址重写</h2><p>在URL重写中，我们将令牌或标识符附加到下一个Servlet或下一个资源的URL。<br>可以使用以下格式发送参数名称/值对：</p>
<pre><code>http://localhost/myappurl?key1=value1&amp;key2=value2&amp;??...
</code></pre><p><strong>使用=符号分隔名称和值，使用&amp;符号将参数名/值对与其他参数分开。</strong>当用户单击超链接时，参数名称/值对将被传递到服务器。 从Servlet中可以使用getParameter()方法获取指定参数的值。</p>
<p>优点：不依赖浏览器（相较于Cookie），不需要每次都提交表单（相较于隐藏表单字段）<br>缺点：只能在链接上使用，而且会把信息暴露在链接中</p>
<h3 id="代码示例（基于上方的Cookie入门示例修改-配置文件不变）"><a href="#代码示例（基于上方的Cookie入门示例修改-配置文件不变）" class="headerlink" title="代码示例（基于上方的Cookie入门示例修改,配置文件不变）"></a>代码示例（基于上方的Cookie入门示例修改,配置文件不变）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public class FirstServlet extends HttpServlet &#123;</span><br><span class="line">    private static final long serialVersionUID = 1L;</span><br><span class="line">    protected void doGet(HttpServletRequest request, HttpServletResponse response)</span><br><span class="line">            throws ServletException, IOException &#123;</span><br><span class="line">        response.setCharacterEncoding(&quot;UTF-8&quot;);</span><br><span class="line">        response.setContentType(&quot;text/html;charset=UTF-8&quot;);</span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">        String n = request.getParameter(&quot;username&quot;);</span><br><span class="line"></span><br><span class="line">        out.print(&quot;您好， &quot; + n + &quot;&lt;br/&gt;&lt;hr/&gt;&quot;);</span><br><span class="line"></span><br><span class="line">        // 将参数添加到网址：注意格式：?key1=value1&amp;key2=value2</span><br><span class="line">        out.print(&quot;&lt;a href=&apos;SecondServletUrl?uname=&quot; + n + &quot;&apos;&gt;使用URL参数访问用户名&lt;/a&gt;&quot;);</span><br><span class="line"></span><br><span class="line">        out.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public class SecondServlet extends HttpServlet &#123;</span><br><span class="line">    private static final long serialVersionUID = 1L;</span><br><span class="line"></span><br><span class="line">    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</span><br><span class="line">        response.setCharacterEncoding(&quot;UTF-8&quot;);</span><br><span class="line">        response.setContentType(&quot;text/html;charset=UTF-8&quot;); </span><br><span class="line">        PrintWriter out = response.getWriter();  </span><br><span class="line">        //获得参数  </span><br><span class="line">        String n=request.getParameter(&quot;uname&quot;);  </span><br><span class="line">        out.print(&quot;Hello &quot;+n);  </span><br><span class="line">        out.close();  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="HttpSession"><a href="#HttpSession" class="headerlink" title="HttpSession"></a>HttpSession</h2><h3 id="什么是HttpSession"><a href="#什么是HttpSession" class="headerlink" title="什么是HttpSession"></a>什么是HttpSession</h3><p>在应用容器中，它为每个用户创建会话ID。<strong>容器使用此标识来识别特定的用户。</strong></p>
<p>示意图如下：</p>
<p><img src="https://s1.ax1x.com/2018/06/11/CLrgfO.jpg" alt="CLrgfO.jpg"></p>
<p>关于此图的解释可以参考下方的示例代码</p>
<h3 id="获取HttpSession-以及-HttpSession的常用方法"><a href="#获取HttpSession-以及-HttpSession的常用方法" class="headerlink" title="获取HttpSession 以及 HttpSession的常用方法"></a>获取HttpSession 以及 HttpSession的常用方法</h3><p><strong>获取HttpSession的方法：（基于HttpServletRequest接口）</strong><br><img src="https://s1.ax1x.com/2018/06/11/CLr7AP.png" alt="CLr7AP.png"></p>
<p><strong>HttpSession的常用方法 ：（下方的示例代码中使用getId()来说明容器如何识别特定的用户）</strong></p>
<p><img src="https://s1.ax1x.com/2018/06/11/CLrxns.png" alt="CLrxns.png"></p>
<h2 id="HttpSession代码示例"><a href="#HttpSession代码示例" class="headerlink" title="HttpSession代码示例"></a>HttpSession代码示例</h2><p>此处的代码背景和上方使用Cookie登陆注销一致，只是此处使用HttpSession而已。</p>
<h3 id="视图部分代码"><a href="#视图部分代码" class="headerlink" title="视图部分代码"></a>视图部分代码</h3><p><strong>初始页面</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">&lt;title&gt;Session登录注销实例&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body style=&quot;text-algin: center;&quot;&gt;</span><br><span class="line">    &lt;h2&gt;欢迎使用Session登录注销应用程序&lt;/h2&gt;</span><br><span class="line">    &lt;a href=&quot;loginSession.html&quot;&gt;登录&lt;/a&gt;|</span><br><span class="line">    &lt;a href=&quot;HttpLogoutServlet&quot;&gt;注销&lt;/a&gt;|</span><br><span class="line">    &lt;a href=&quot;HttpProfileServlet&quot;&gt;个人信息&lt;/a&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p><strong>登陆页面loginSession.html</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">&lt;title&gt;登陆界面&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div style=&quot;text-algin: center; padding-top:12px;&quot;&gt;</span><br><span class="line">        &lt;form action=&quot;HttpLoginServlet&quot; method=&quot;post&quot;&gt;</span><br><span class="line">            用户名：&lt;input type=&quot;text&quot; name=&quot;username&quot;&gt;  密码：&lt;input type=&quot;password&quot;</span><br><span class="line">                name=&quot;password&quot;&gt;&lt;input type=&quot;submit&quot; value=&quot;登录&quot;&gt;</span><br><span class="line">        &lt;/form&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p><strong>辅助页面linkSession.html（仅仅是将该页面作为拼接页面的一部分）</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">&lt;title&gt;linkSession&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;a href=&quot;loginSession.html&quot;&gt;登陆&lt;/a&gt;|</span><br><span class="line">    &lt;a href=&quot;HttpLogoutServlet&quot;&gt;注销&lt;/a&gt;|</span><br><span class="line">    &lt;a href=&quot;HttpProfileServlet&quot;&gt;个人信息&lt;/a&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h3 id="配置信息web-xml"><a href="#配置信息web-xml" class="headerlink" title="配置信息web.xml"></a>配置信息web.xml</h3><p>此处的web.xml配置很简单，仅仅配置了欢迎页面，而没有配置任何额外的Servlet，因为该Servlet在java文件中方配置。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;welcome-file-list&gt;</span><br><span class="line">    &lt;welcome-file&gt;indexHttp.html&lt;/welcome-file&gt;</span><br><span class="line">  &lt;/welcome-file-list&gt;</span><br></pre></td></tr></table></figure>
<h3 id="Servlet部分代码"><a href="#Servlet部分代码" class="headerlink" title="Servlet部分代码"></a>Servlet部分代码</h3><p>此处的Servlet的配置与之前记录的不同（在页面中配置后就无需在web.xml文件中额外配置。）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">package com.HttpSessionDemo;</span><br><span class="line">import java.io.*;</span><br><span class="line">import javax.servlet.ServletException;</span><br><span class="line">import javax.servlet.annotation.WebServlet;</span><br><span class="line">import javax.servlet.http.*;</span><br><span class="line">@WebServlet(&quot;/HttpLoginServlet&quot;)  **// 在此处配置Servlet对应的 url-pattern**</span><br><span class="line">public class LoginServlet extends HttpServlet &#123;</span><br><span class="line">	private static final long serialVersionUID = 1L;</span><br><span class="line">    protected void doPost(HttpServletRequest request, HttpServletResponse response)</span><br><span class="line">            throws ServletException, IOException &#123;</span><br><span class="line">        response.setCharacterEncoding(&quot;UTF-8&quot;);</span><br><span class="line">        response.setContentType(&quot;text/html;charset=UTF-8&quot;);</span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">        request.setCharacterEncoding(&quot;UTF-8&quot;);</span><br><span class="line">        // 请求转发</span><br><span class="line">        request.getRequestDispatcher(&quot;linkSession.html&quot;).include(request, response);</span><br><span class="line"></span><br><span class="line">        String username = request.getParameter(&quot;username&quot;);</span><br><span class="line">        String password = request.getParameter(&quot;password&quot;);</span><br><span class="line">       </span><br><span class="line"></span><br><span class="line">        if ((username.equals(&quot;admin&quot;) &amp;&amp; password.equals(&quot;admin123&quot;))||(username.equals(&quot;admin&quot;) &amp;&amp; password.equals(&quot;admin1234&quot;))) &#123;</span><br><span class="line">            out.print(&quot;&lt;br&gt; Welcome, &quot; + username);</span><br><span class="line">            HttpSession session = request.getSession(); </span><br><span class="line">            // 下面这一行代码主要是为了看一下不同的servlet对应的session  id是否一致</span><br><span class="line">            System.out.println(&quot;登陆id：&quot;+session.getId()); </span><br><span class="line">           // **使用session设定属性： 这里可以参考Servlet属性设置那一个章节。**</span><br><span class="line">            session.setAttribute(&quot;username&quot;, username);</span><br><span class="line">            session.setAttribute(&quot;nickname&quot;, &quot;朱彪&quot;);</span><br><span class="line">            session.setAttribute(&quot;age&quot;, &quot;21&quot;);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">        	out.print(&quot;&lt;font style=&apos;color:rec;&apos;&gt;对不起，用户名或密码错误!&lt;/font&gt;&quot;);</span><br><span class="line">            request.getRequestDispatcher(&quot;loginSession.html&quot;).include(request, response);</span><br><span class="line">        &#125;</span><br><span class="line">        out.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">package com.HttpSessionDemo;</span><br><span class="line">import java.io.*;</span><br><span class="line">import javax.servlet.ServletException;</span><br><span class="line">import javax.servlet.annotation.WebServlet;</span><br><span class="line">import javax.servlet.http.*;</span><br><span class="line">@WebServlet(&quot;/HttpLogoutServlet&quot;)</span><br><span class="line">public class LogoutServlet extends HttpServlet &#123;</span><br><span class="line">     private static final long serialVersionUID = 1L;</span><br><span class="line">     protected void doGet(HttpServletRequest request, HttpServletResponse response)</span><br><span class="line">	            throws ServletException, IOException &#123;</span><br><span class="line">	        response.setCharacterEncoding(&quot;UTF-8&quot;);</span><br><span class="line">	        response.setContentType(&quot;text/html;charset=UTF-8&quot;);</span><br><span class="line">	        PrintWriter out = response.getWriter();</span><br><span class="line">	        request.setCharacterEncoding(&quot;UTF-8&quot;);</span><br><span class="line">	        </span><br><span class="line">	        request.getRequestDispatcher(&quot;linkSession.html&quot;).include(request, response);</span><br><span class="line">	        </span><br><span class="line">	        HttpSession session = request.getSession();</span><br><span class="line">	        System.out.println(&quot;退出id：&quot;+session.getId());</span><br><span class="line">	        // 清除session</span><br><span class="line">	        session.invalidate();</span><br><span class="line">	        out.print(&quot;&lt;br&gt; 您已成功注销退出系统!&quot;);</span><br><span class="line">	        out.close();</span><br><span class="line">	 &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">package com.HttpSessionDemo;</span><br><span class="line">import java.io.*;</span><br><span class="line">import javax.servlet.ServletException;</span><br><span class="line">import javax.servlet.annotation.WebServlet;</span><br><span class="line">import javax.servlet.http.*;</span><br><span class="line">@WebServlet(&quot;/HttpProfileServlet&quot;)</span><br><span class="line">public class ProfileServlet extends HttpServlet &#123;</span><br><span class="line">	private static final long serialVersionUID = 1L;</span><br><span class="line">    protected void doGet(HttpServletRequest request, HttpServletResponse response)</span><br><span class="line">            throws ServletException, IOException &#123;</span><br><span class="line">        response.setCharacterEncoding(&quot;UTF-8&quot;);</span><br><span class="line">        response.setContentType(&quot;text/html;charset=UTF-8&quot;);</span><br><span class="line">        request.setCharacterEncoding(&quot;UTF-8&quot;);</span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">        request.getRequestDispatcher(&quot;linkSession.html&quot;).include(request, response);</span><br><span class="line">       // 获取Session(注意此处采用了第二种方法也就是将boolean设置为false的方法)</span><br><span class="line">       HttpSession session = request.getSession(false);</span><br><span class="line">      //  HttpSession session = request.getSession();</span><br><span class="line">        if (session != null) &#123;</span><br><span class="line">        	System.out.println(&quot;查看信息id：&quot;+session.getId());</span><br><span class="line">            String name = (String) session.getAttribute(&quot;username&quot;);</span><br><span class="line">            String nickname = (String) session.getAttribute(&quot;nickname&quot;);</span><br><span class="line">            String age = (String) session.getAttribute(&quot;age&quot;);</span><br><span class="line">            out.print(&quot;&lt;br&gt; 您好， &quot; + name + &quot; !&lt;br/&gt; &quot;);</span><br><span class="line">            out.print(&quot;个人信息如下: &lt;hr/&gt; 昵称：&quot; + nickname + &quot; ，年龄：&quot;+age);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">        	  out.print(&quot;请登录系统！&quot;);</span><br><span class="line">              request.getRequestDispatcher(&quot;loginSession.html&quot;).include(request, response);</span><br><span class="line">        &#125;</span><br><span class="line">        out.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>关于上方的几点说明：</p>
<ol>
<li>在前面两个Servlet中获取HttpSession采用了方法1，这没有问题（如果存在当前会话就返回当前会话，如果不存在就创建一个会话），而第三个Servlet采用的方法2，并将布尔值设为false。这样只有存在当前会话才会返回当前会话，不存在的话则返回null(HttpSession类对应的默认值)</li>
<li>在上面三段代码中，每段代码都添加了System.out.println(“xx id：”+session.getId());的信息。经过测试登录后（未注销）在三个Servlet中会输出相同的信息。</li>
<li>上方的setAttribute以及getAttribute方法—参考Servlet属性设置。</li>
</ol>
<h3 id="运行结果-2"><a href="#运行结果-2" class="headerlink" title="运行结果"></a>运行结果</h3><p>和上方的Cookie类似。</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/Servlet简记/">Servlet简记</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2018/06/05/Servlet过滤器介绍及使用示例/" title="Servlet过滤器介绍及使用示例" itemprop="url">Servlet过滤器介绍及使用示例</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="赵成龙" target="_blank" itemprop="author">赵成龙</a>
		
  <p class="article-time">
    <time datetime="2018-06-05T11:49:48.000Z" itemprop="datePublished"> Published 2018-06-05</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>此处主要记录Servlet的过滤器以及过滤器的常见使用。</p>
<h2 id="什么是过滤器"><a href="#什么是过滤器" class="headerlink" title="什么是过滤器"></a>什么是过滤器</h2><p>过滤器是在请求的<strong>预处理和后处理时</strong>调用的对象。用于执行转换，日志记录，压缩，加解密，输入验证等过滤任务。</p>
<p>servlet过滤器是可插拔的，即它在web.xml文件中定义。如果从web.xml文件中删除过滤项，则过滤器将被自动删除。</p>
<h2 id="过滤器的模型理解"><a href="#过滤器的模型理解" class="headerlink" title="过滤器的模型理解"></a>过滤器的模型理解</h2><p><img src="https://s1.ax1x.com/2018/06/06/CHeCEF.jpg" alt="CHeCEF.jpg"></p>
<p>从上方的箭头示意中可以看出过滤器在预处理（Preprocessing）以及后处理(Postprocessing)方面的作用。</p>
<h2 id="过滤器的作用以及优点"><a href="#过滤器的作用以及优点" class="headerlink" title="过滤器的作用以及优点"></a>过滤器的作用以及优点</h2><p>  预处理以及后处理。过滤器是可插拔的，不依赖于其他servlet,因而维护比较容易。</p>
<h2 id="过滤器相关的API"><a href="#过滤器相关的API" class="headerlink" title="过滤器相关的API"></a>过滤器相关的API</h2><p>像Servlet一样，过滤器也有自己的API。 javax.servlet包中包含Filter API的三个接口.</p>
<ol>
<li>Filter</li>
<li>FilterChain</li>
<li>FilterConfig</li>
</ol>
<p>要创建一个过滤器，必须要实现Filter接口。 </p>
<h3 id="Filter接口"><a href="#Filter接口" class="headerlink" title="Filter接口"></a>Filter接口</h3><p>Filter接口为过滤器提供了生命周期方法。具体如下：</p>
<p><img src="https://s1.ax1x.com/2018/06/06/CHedUg.png" alt="CHedUg.png"></p>
<h3 id="FilterChain接口"><a href="#FilterChain接口" class="headerlink" title="FilterChain接口"></a>FilterChain接口</h3><p>FilterChain对象负责调用链中的下一个过滤器或资源。对象在Filter接口的doFilter方法中传递。</p>
<p>FilterChain接口只包含一个方法：</p>
<pre><code>public void doFilter(HttpServletRequest request，HttpServletResponse response)：
//   它将控件传递给下一个过滤器或资源。
</code></pre><h2 id="过滤器的建议入门样例"><a href="#过滤器的建议入门样例" class="headerlink" title="过滤器的建议入门样例"></a>过滤器的建议入门样例</h2><p>通过该样例主要理解过滤器在预处理以及后处理方面的作用。</p>
<h3 id="index-html-作为默认的欢迎页"><a href="#index-html-作为默认的欢迎页" class="headerlink" title="index.html   (作为默认的欢迎页)"></a>index.html   (作为默认的欢迎页)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">&lt;title&gt;过滤器的简单示例&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div style=&quot;font-align: center;&quot;&gt;</span><br><span class="line">        &lt;a href=&quot;MyServletUrl&quot;&gt;查看过滤器调用信息&lt;/a&gt;&lt;/br&gt;</span><br><span class="line">        &lt;a href=&quot;/ServletGuoLvQi/MyServletUrl&quot;&gt;查看过滤器调用信息&lt;/a&gt;&lt;/br&gt;</span><br><span class="line">        &lt;a href=&quot;/MyServletUrl&quot;&gt;查看过滤器调用信息(会报错)&lt;/a&gt; </span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>说明：<br>注意上方href的格式：前面两种都可以，第三种会报错。</p>
<h3 id="Servlet代码"><a href="#Servlet代码" class="headerlink" title="Servlet代码"></a>Servlet代码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">package com.simple;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.PrintWriter;</span><br><span class="line">import javax.servlet.ServletException;</span><br><span class="line">import javax.servlet.http.*;</span><br><span class="line">public class MyServlet extends HttpServlet &#123;</span><br><span class="line">    </span><br><span class="line">	private static final long serialVersionUID = 1L;</span><br><span class="line"></span><br><span class="line">	public void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</span><br><span class="line">        response.setCharacterEncoding(&quot;UTF-8&quot;);</span><br><span class="line">        response.setContentType(&quot;text/html;charset=UTF-8&quot;);</span><br><span class="line">        request.setCharacterEncoding(&quot;UTF-8&quot;);</span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">        out.print(&quot;这是一个简单的Servlet.&lt;br&gt;&quot;);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="过滤器代码（此处是重点）"><a href="#过滤器代码（此处是重点）" class="headerlink" title="过滤器代码（此处是重点）"></a>过滤器代码（此处是重点）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">package com.simple;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.PrintWriter;</span><br><span class="line">import javax.servlet.*;</span><br><span class="line"></span><br><span class="line">public class MyFilter implements Filter &#123;</span><br><span class="line"></span><br><span class="line">    public void init(FilterConfig arg0) throws ServletException &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)</span><br><span class="line">            throws IOException, ServletException &#123;</span><br><span class="line"></span><br><span class="line">        response.setCharacterEncoding(&quot;UTF-8&quot;);</span><br><span class="line">        response.setContentType(&quot;text/html;charset=UTF-8&quot;);</span><br><span class="line">        request.setCharacterEncoding(&quot;UTF-8&quot;);</span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">        out.print(&quot;过滤器调用之前（预处理）&lt;br/&gt;&quot;);</span><br><span class="line">        chain.doFilter(request, response);// sends request to next resource</span><br><span class="line">       out.print(&quot;过滤器调用之后（后处理）&lt;br/&gt;&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void destroy() &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="web-xml配置"><a href="#web-xml配置" class="headerlink" title="web.xml配置"></a>web.xml配置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">  &lt;servlet&gt;</span><br><span class="line">      &lt;servlet-name&gt;MyServlet&lt;/servlet-name&gt;</span><br><span class="line">      &lt;servlet-class&gt;com.simple.MyServlet&lt;/servlet-class&gt;</span><br><span class="line">  &lt;/servlet&gt;</span><br><span class="line"></span><br><span class="line">  &lt;servlet-mapping&gt;</span><br><span class="line">      &lt;servlet-name&gt;MyServlet&lt;/servlet-name&gt;</span><br><span class="line">      &lt;url-pattern&gt;/MyServletUrl&lt;/url-pattern&gt;</span><br><span class="line">  &lt;/servlet-mapping&gt;</span><br><span class="line">&lt;!--定义过滤器--&gt;</span><br><span class="line">&lt;filter&gt;</span><br><span class="line">      &lt;filter-name&gt;MyFilter&lt;/filter-name&gt;</span><br><span class="line">      &lt;filter-class&gt;com.simple.MyFilter&lt;/filter-class&gt;</span><br><span class="line">&lt;/filter&gt;</span><br><span class="line">&lt;filter-mapping&gt;</span><br><span class="line">      &lt;filter-name&gt;MyFilter&lt;/filter-name&gt;</span><br><span class="line">      &lt;url-pattern&gt;/MyServletUrl&lt;/url-pattern&gt; </span><br><span class="line">      &lt;!--&lt;servlet-name&gt;MyServlet&lt;/servlet-name&gt;   在此处也可以--&gt;</span><br><span class="line">  &lt;/filter-mapping&gt;</span><br></pre></td></tr></table></figure>
<p>关于上方filter-mapping的几点说明：</p>
<p>对于映射过滤器，可以使用url-pattern或servlet-name。 url-pattern元素比servlet-name元素具有优势，即它可以应用于servlet，JSP或HTML资源。<br>如上方注释掉的内容。</p>
<h3 id="运行结果"><a href="#运行结果" class="headerlink" title="运行结果"></a>运行结果</h3><p><img src="https://s1.ax1x.com/2018/06/07/CHnEm6.png" alt="CHnEm6.png"></p>
<p><img src="https://s1.ax1x.com/2018/06/07/CHnV0K.png" alt="CHnV0K.png"></p>
<p>由以上例子可以看出过滤器在预处理以及后处理方面的作用。</p>
<h2 id="过滤器的表单验证"><a href="#过滤器的表单验证" class="headerlink" title="过滤器的表单验证"></a>过滤器的表单验证</h2><p>使用场景大致如下：在提交的表单中，使用过滤器获取表单中的数据（通过request），在过滤器中对数据进行校验和验证，根据不同的判断条件进行不同的处理。<br>例如自己练习中使用的身份验证。在表单中提交数据，过滤器预处理时获得用户名和密码，对用户名和密码进行校验（此处采用的是硬编码的形式，工作中更多的是对数据库或者是某一个数据源或者一个一个接口进行数据校验）。通过校验的进入下一个页面，没通过的话给出提示信息，并返回登陆界面。</p>
<h2 id="过滤器中的Servlet-FilterConfig应用示例"><a href="#过滤器中的Servlet-FilterConfig应用示例" class="headerlink" title="过滤器中的Servlet FilterConfig应用示例"></a>过滤器中的Servlet FilterConfig应用示例</h2><h3 id="什么是FilterConfig（todo）"><a href="#什么是FilterConfig（todo）" class="headerlink" title="什么是FilterConfig（todo）"></a>什么是FilterConfig（todo）</h3><p>FilterConfig的对象由Web容器创建（对于这一点，值得商榷。因为自己的使用体验，并没有感觉到？？？？）。这个对象可用于获取web.xml文件中的配置信息。总体上可以类比到之前用过的ServletConfig,而不是ServletContext。</p>
<h3 id="FilterConfig接口的方法"><a href="#FilterConfig接口的方法" class="headerlink" title="FilterConfig接口的方法"></a>FilterConfig接口的方法</h3><p>FilterConfig接口方法如下图所示：</p>
<p><img src="https://s1.ax1x.com/2018/06/07/CHQpHx.png" alt="CHQpHx.png"></p>
<h3 id="样例背景"><a href="#样例背景" class="headerlink" title="样例背景"></a>样例背景</h3><p>创建过滤器，从web.xml中获取信息，依据获取到的信息进行判断。</p>
<h3 id="Servlet代码-1"><a href="#Servlet代码-1" class="headerlink" title="Servlet代码"></a>Servlet代码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">package com.config;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.PrintWriter;</span><br><span class="line">import javax.servlet.ServletException;</span><br><span class="line">import javax.servlet.http.*;</span><br><span class="line">public class HelloServlet extends HttpServlet &#123;</span><br><span class="line">   	private static final long serialVersionUID = 1L;</span><br><span class="line">    public void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        response.setCharacterEncoding(&quot;UTF-8&quot;);</span><br><span class="line">        response.setContentType(&quot;text/html;charset=UTF-8&quot;);</span><br><span class="line">        request.setCharacterEncoding(&quot;UTF-8&quot;);</span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line"></span><br><span class="line">        out.print(&quot;&lt;br&gt;welcome to servlet&lt;br&gt;&quot;);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="过滤器代码"><a href="#过滤器代码" class="headerlink" title="过滤器代码"></a>过滤器代码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">package com.config;</span><br><span class="line"></span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line">import javax.servlet.*;</span><br><span class="line"></span><br><span class="line">public class ConfigFilter implements Filter &#123;</span><br><span class="line"></span><br><span class="line">    FilterConfig config; //</span><br><span class="line">    // 1.init()</span><br><span class="line">    public void init(FilterConfig config) throws ServletException &#123;</span><br><span class="line">        this.config = config;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void doFilter(ServletRequest req, ServletResponse resp, FilterChain chain)</span><br><span class="line">            throws IOException, ServletException &#123;</span><br><span class="line">        resp.setCharacterEncoding(&quot;UTF-8&quot;);</span><br><span class="line">        resp.setContentType(&quot;text/html;charset=UTF-8&quot;);</span><br><span class="line">        req.setCharacterEncoding(&quot;UTF-8&quot;);</span><br><span class="line">        PrintWriter out = resp.getWriter();</span><br><span class="line">        String s = config.getInitParameter(&quot;construction&quot;);</span><br><span class="line">       // String s = config.getInitParameter(&quot;demo&quot;); // a行 </span><br><span class="line">        if (s.equals(&quot;yes&quot;)) &#123;</span><br><span class="line">            out.print(&quot;此页面正在处理中&quot;);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            chain.doFilter(req, resp);// sends request to next resource</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void destroy() &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>关于上方a行代码的说明： a行中的参数是另外一个过滤器中定义的参数，此处尝试获取，发现并不能够获取。这个参数只可以在它所在的过滤器中才能获取。因此总体上而言，它的使用很类似与ServletConfig。</p>
<h3 id="web-xml配置-1"><a href="#web-xml配置-1" class="headerlink" title="web.xml配置"></a>web.xml配置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;servlet&gt;</span><br><span class="line">        &lt;servlet-name&gt;HelloServlet&lt;/servlet-name&gt;</span><br><span class="line">        &lt;servlet-class&gt;com.config.HelloServlet&lt;/servlet-class&gt;</span><br><span class="line">&lt;/servlet&gt;</span><br><span class="line">&lt;servlet-mapping&gt;</span><br><span class="line">        &lt;servlet-name&gt;HelloServlet&lt;/servlet-name&gt;</span><br><span class="line">        &lt;url-pattern&gt;/HelloServletUrl&lt;/url-pattern&gt;</span><br><span class="line">&lt;/servlet-mapping&gt;</span><br><span class="line">&lt;filter&gt;</span><br><span class="line">        &lt;filter-name&gt;ConfigFilter&lt;/filter-name&gt;</span><br><span class="line">        &lt;filter-class&gt;com.config.ConfigFilter&lt;/filter-class&gt;</span><br><span class="line">        &lt;init-param&gt;</span><br><span class="line">            &lt;param-name&gt;construction&lt;/param-name&gt;</span><br><span class="line">            &lt;param-value&gt;yes&lt;/param-value&gt;</span><br><span class="line">         &lt;!--   &lt;param-value&gt;no&lt;/param-value&gt;--&gt;</span><br><span class="line">        &lt;/init-param&gt;</span><br><span class="line">&lt;/filter&gt;</span><br><span class="line">&lt;filter-mapping&gt;</span><br><span class="line">        &lt;filter-name&gt;ConfigFilter&lt;/filter-name&gt;</span><br><span class="line">        &lt;url-pattern&gt;/HelloServletUrl&lt;/url-pattern&gt;</span><br><span class="line">&lt;/filter-mapping&gt;</span><br></pre></td></tr></table></figure>
<h3 id="运行结果-1"><a href="#运行结果-1" class="headerlink" title="运行结果"></a>运行结果</h3><p><img src="https://s1.ax1x.com/2018/06/07/CHQw5T.png" alt="CHQw5T.png"></p>
<p><img src="https://s1.ax1x.com/2018/06/07/CHQBPU.png" alt="CHQBPU.png"></p>
<h2 id="过滤器的计次数处理"><a href="#过滤器的计次数处理" class="headerlink" title="过滤器的计次数处理"></a>过滤器的计次数处理</h2><p>这个样例主要用于记录网页被访问的次数，比较实用。采用的方式就是过滤器预处理中静态变量进行计数，并将计数的结果传递给展示的页面。</p>
<h3 id="计数的Filter"><a href="#计数的Filter" class="headerlink" title="计数的Filter"></a>计数的Filter</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">package com.exam;</span><br><span class="line">import java.io.*;  </span><br><span class="line">import javax.servlet.*;  </span><br><span class="line"></span><br><span class="line">public class CountFilter implements Filter&#123;  </span><br><span class="line">    static int count=0;  </span><br><span class="line">    public void init(FilterConfig arg0) throws ServletException &#123;&#125;  </span><br><span class="line"></span><br><span class="line">    public void doFilter(ServletRequest req, ServletResponse res,  </span><br><span class="line">            FilterChain chain) throws IOException, ServletException &#123;  </span><br><span class="line">    	PrintWriter out=res.getWriter(); </span><br><span class="line">        long before=System.currentTimeMillis();  </span><br><span class="line">        chain.doFilter(req,res);</span><br><span class="line">        long after=System.currentTimeMillis();</span><br><span class="line">        out.print(&quot;&lt;br/&gt;visited times:&quot;+(++count)+&quot;&lt;br&gt;&quot;); // 计数</span><br><span class="line">        out.print(&quot;&lt;br/&gt;response time:&quot;+(after-before)+&quot; miliseconds&quot;); // 记录网页的反应时间 </span><br><span class="line">        out.close();  </span><br><span class="line"></span><br><span class="line">    &#125;  </span><br><span class="line">    public void destroy() &#123;&#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>上方使用静态变量来实现计数。也算是静态变量的一个不错的使用场景。值得多看一看。</strong></p>
<h3 id="Servlet代码-2"><a href="#Servlet代码-2" class="headerlink" title="Servlet代码"></a>Servlet代码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">package com.exam;</span><br><span class="line">import java.io.*;</span><br><span class="line">import javax.servlet.ServletException;</span><br><span class="line">import javax.servlet.http.*;</span><br><span class="line">public class WebSiteServlet extends HttpServlet &#123;</span><br><span class="line">   </span><br><span class="line">	private static final long serialVersionUID = 1L;</span><br><span class="line"></span><br><span class="line">	public void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</span><br><span class="line">        response.setCharacterEncoding(&quot;UTF-8&quot;);</span><br><span class="line">        response.setContentType(&quot;text/html;charset=UTF-8&quot;);</span><br><span class="line">        request.setCharacterEncoding(&quot;UTF-8&quot;);</span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">        out.print(&quot;&lt;br/&gt;ha,ha,ha,welcome to this website..&quot;);</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="web-xml"><a href="#web-xml" class="headerlink" title="web.xml"></a>web.xml</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> &lt;servlet&gt;</span><br><span class="line">        &lt;servlet-name&gt;WebSiteServlet&lt;/servlet-name&gt;</span><br><span class="line">        &lt;servlet-class&gt;com.exam.WebSiteServlet&lt;/servlet-class&gt;</span><br><span class="line">&lt;/servlet&gt;</span><br><span class="line">&lt;servlet-mapping&gt;</span><br><span class="line">        &lt;servlet-name&gt;WebSiteServlet&lt;/servlet-name&gt;</span><br><span class="line">        &lt;url-pattern&gt;/WebSiteServletUrl&lt;/url-pattern&gt;</span><br><span class="line">&lt;/servlet-mapping&gt;</span><br><span class="line">&lt;filter&gt;</span><br><span class="line">        &lt;filter-name&gt;CountFilter&lt;/filter-name&gt;</span><br><span class="line">        &lt;filter-class&gt;com.exam.CountFilter&lt;/filter-class&gt;</span><br><span class="line">    &lt;/filter&gt;</span><br><span class="line">    &lt;filter-mapping&gt;</span><br><span class="line">        &lt;filter-name&gt;CountFilter&lt;/filter-name&gt;</span><br><span class="line">         &lt;url-pattern&gt;/WebSiteServletUrl&lt;/url-pattern&gt;</span><br><span class="line">    &lt;/filter-mapping&gt;</span><br></pre></td></tr></table></figure>
<h3 id="运行结果图"><a href="#运行结果图" class="headerlink" title="运行结果图"></a>运行结果图</h3><p>首次访问<br><img src="https://s1.ax1x.com/2018/06/07/CHQOdP.png" alt="CHQOdP.png"></p>
<p>再次访问</p>
<p><img src="https://s1.ax1x.com/2018/06/07/CHlkd0.png" alt="CHlkd0.png"></p>
<p>以上的内容就是关于过滤器的使用。今天的进度有点慢。</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/Servlet简记/">Servlet简记</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2018/06/05/Servlet配置信息/" title="Servlet配置信息" itemprop="url">Servlet配置信息</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="赵成龙" target="_blank" itemprop="author">赵成龙</a>
		
  <p class="article-time">
    <time datetime="2018-06-05T04:34:58.000Z" itemprop="datePublished"> Published 2018-06-05</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>此处主要记录Servlet的配置信息，包含两个方面：ServletConfig配置信息以及ServletContext配置信息。此外还记录了Servlet的属性设置</p>
<h2 id="ServletConfig配置信息"><a href="#ServletConfig配置信息" class="headerlink" title="ServletConfig配置信息"></a>ServletConfig配置信息</h2><h3 id="什么是ServletConfig及作用"><a href="#什么是ServletConfig及作用" class="headerlink" title="什么是ServletConfig及作用"></a>什么是ServletConfig及作用</h3><p>ServletConfig对象是由<strong>每个servlet的Web容器</strong>创建的。<br>这个对象可用于从web.xml文件获取配置信息。</p>
<h3 id="ServletConfig接口的方法-以及获取ServletConfig的对象的方法"><a href="#ServletConfig接口的方法-以及获取ServletConfig的对象的方法" class="headerlink" title="ServletConfig接口的方法 以及获取ServletConfig的对象的方法"></a>ServletConfig接口的方法 以及获取ServletConfig的对象的方法</h3><p><img src="https://s1.ax1x.com/2018/06/05/C7QHXR.png" alt="C7QHXR.png"></p>
<p>通过调用Servlet接口的getServletConfig()方法来返回ServletConfig对象。</p>
<p>语法如下：</p>
<pre><code>public ServletConfig getServletConfig();
</code></pre><h2 id="关于ServletConfig配置信息的代码实例"><a href="#关于ServletConfig配置信息的代码实例" class="headerlink" title="关于ServletConfig配置信息的代码实例"></a>关于ServletConfig配置信息的代码实例</h2><h3 id="web-xml"><a href="#web-xml" class="headerlink" title="web.xml"></a>web.xml</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;servlet&gt;</span><br><span class="line">     &lt;servlet-name&gt;ConfigServletAll&lt;/servlet-name&gt;</span><br><span class="line">     &lt;servlet-class&gt;com.config.ConfigServletAll&lt;/servlet-class&gt;</span><br><span class="line">     &lt;init-param&gt;</span><br><span class="line">         &lt;param-name&gt;mssql_driver&lt;/param-name&gt;</span><br><span class="line">         &lt;param-value&gt;com.mssql.jdbc.Driver&lt;/param-value&gt;</span><br><span class="line">     &lt;/init-param&gt;</span><br><span class="line">     &lt;init-param&gt;</span><br><span class="line">         &lt;param-name&gt;username&lt;/param-name&gt;</span><br><span class="line">         &lt;param-value&gt;root&lt;/param-value&gt;</span><br><span class="line">     &lt;/init-param&gt;</span><br><span class="line">     &lt;init-param&gt;</span><br><span class="line">         &lt;param-name&gt;passwd&lt;/param-name&gt;</span><br><span class="line">         &lt;param-value&gt;123456&lt;/param-value&gt;</span><br><span class="line">     &lt;/init-param&gt;</span><br><span class="line"> &lt;/servlet&gt;</span><br><span class="line"> &lt;servlet-mapping&gt;</span><br><span class="line">     &lt;servlet-name&gt;ConfigServletAll&lt;/servlet-name&gt;</span><br><span class="line">     &lt;url-pattern&gt;/ConfigServletAllUrl&lt;/url-pattern&gt;</span><br><span class="line"> &lt;/servlet-mapping&gt;</span><br></pre></td></tr></table></figure>
<p>关于上方的说明：</p>
<ol>
<li><init-param>元素是<servlet>元素的子元素，需要在其内部使用。</servlet></init-param></li>
<li>上面的方法只针对每一个具体的servlet。<strong>一个servlet是不能获取其他的servlet的<init-param>数值的。</init-param></strong>  例如在上方的web.xml文件中添加一个另外一个servlet。在下方的servlet中不能获取到新定义的servlet的参数值。</li>
</ol>
<h3 id="Servlet代码部分"><a href="#Servlet代码部分" class="headerlink" title="Servlet代码部分"></a>Servlet代码部分</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">package com.config;</span><br><span class="line">import java.io.*;</span><br><span class="line">import java.util.Enumeration;</span><br><span class="line">import javax.servlet.*;</span><br><span class="line">import javax.servlet.http.*;</span><br><span class="line"></span><br><span class="line">public class ConfigServletAll extends HttpServlet &#123;</span><br><span class="line">    private static final long serialVersionUID = 1L;</span><br><span class="line">    protected void doGet(HttpServletRequest request, HttpServletResponse response)</span><br><span class="line">            throws ServletException, IOException &#123;</span><br><span class="line">        response.setContentType(&quot;text/html&quot;);</span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">        // 1. 获取ServletConfig对象</span><br><span class="line">        ServletConfig config = getServletConfig();</span><br><span class="line">        // 2. 获取该servlet内指定参数的参数值</span><br><span class="line">        String driver = config.getInitParameter(&quot;mssql_driver&quot;);</span><br><span class="line">        out.print(&quot;Driver details is: &lt;b&gt;&quot; + driver+&quot;&lt;b&gt;&quot;);</span><br><span class="line">        // 3.获取一个枚举的参数名称（注意该方法只是获取参数名称，并不能直接获取参数值）</span><br><span class="line">        Enumeration&lt;String&gt; e = config.getInitParameterNames(); </span><br><span class="line">        String str = &quot;&quot;;</span><br><span class="line">        while (e.hasMoreElements()) &#123;</span><br><span class="line">            str = e.nextElement();</span><br><span class="line">            out.print(&quot;Name: &quot; + str);</span><br><span class="line">            out.print(&quot; value: &quot; + config.getInitParameter(str)+&quot;&lt;br/&gt;&quot;); </span><br><span class="line">            //获取参数值</span><br><span class="line">        &#125;</span><br><span class="line">         out.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="运行截图："><a href="#运行截图：" class="headerlink" title="运行截图："></a>运行截图：</h3><p><img src="https://s1.ax1x.com/2018/06/05/C71Vq1.png" alt="C71Vq1.png"></p>
<h2 id="ServletContext配置信息"><a href="#ServletContext配置信息" class="headerlink" title="ServletContext配置信息"></a>ServletContext配置信息</h2><h3 id="什么是ServletContext及其作用"><a href="#什么是ServletContext及其作用" class="headerlink" title="什么是ServletContext及其作用"></a>什么是ServletContext及其作用</h3><p>ServletContext的对象<strong>由Web容器在部署项目时</strong>创建（注意ServletConfig对象是由<strong>每个servlet的Web容器</strong>创建的）。<br>该对象可用于从web.xml文件获取配置信息。<br>每个Web应用程序只有一个ServletContext对象。</p>
<p>如果有信息要共享给多个servlet使用，最好在web.xml文件中使用<context-param>元素提供它。</context-param></p>
<p>基本上可以简单理解为ServletContext是”公有的,共享的”，而ServletConfig是”私有的，不可共享的”。</p>
<h3 id="ServletContext的优点"><a href="#ServletContext的优点" class="headerlink" title="ServletContext的优点"></a>ServletContext的优点</h3><p>如果有任何信息要共享给所有的servlet使用，并且要让它容易维护，最好的办法就是在web.xml文件中提供这些信息，所以如果信息要更改直接在web.xml中修改，而不需要修改servlet代码。</p>
<h3 id="ServletContext方法-以及如何获取该方法"><a href="#ServletContext方法-以及如何获取该方法" class="headerlink" title="ServletContext方法 以及如何获取该方法"></a>ServletContext方法 以及如何获取该方法</h3><p><img src="https://s1.ax1x.com/2018/06/05/C73DfO.png" alt="C73DfO.png"></p>
<p>两种方式获取该方法</p>
<ol>
<li>通过ServletConfig接口的getServletContext()方法返回ServletContext对象。</li>
<li>通过GenericServlet类的getServletContext()方法返回ServletContext对象。</li>
</ol>
<p>获取该方法的代码示例</p>
<pre><code>ServletContext application=getServletConfig().getServletContext();                                  //先获得ServletConfig接口 再调用getServletContext()方法
ServletContext application=getServletContext(); // 直接调用getServletContext()方法
</code></pre><h2 id="ServletContext代码实例"><a href="#ServletContext代码实例" class="headerlink" title="ServletContext代码实例"></a>ServletContext代码实例</h2><h3 id="web-xml配置"><a href="#web-xml配置" class="headerlink" title="web.xml配置"></a>web.xml配置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;context-param&gt;</span><br><span class="line">        &lt;param-name&gt;dname&lt;/param-name&gt;</span><br><span class="line">        &lt;param-value&gt;com.mysql.jdbc.Driver&lt;/param-value&gt;</span><br><span class="line">&lt;/context-param&gt;</span><br><span class="line">    &lt;context-param&gt;</span><br><span class="line">        &lt;param-name&gt;username&lt;/param-name&gt;</span><br><span class="line">        &lt;param-value&gt;root&lt;/param-value&gt;</span><br><span class="line">    &lt;/context-param&gt;</span><br><span class="line"></span><br><span class="line">    &lt;context-param&gt;</span><br><span class="line">        &lt;param-name&gt;password&lt;/param-name&gt;</span><br><span class="line">        &lt;param-value&gt;mypasswd&lt;/param-value&gt;</span><br><span class="line">    &lt;/context-param&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;context-param&gt;</span><br><span class="line">        &lt;param-name&gt;testData&lt;/param-name&gt;</span><br><span class="line">        &lt;param-value&gt;just for test&lt;/param-value&gt;</span><br><span class="line">    &lt;/context-param&gt;</span><br><span class="line">    &lt;servlet&gt;</span><br><span class="line">        &lt;servlet-name&gt;ContextServAll&lt;/servlet-name&gt;</span><br><span class="line">        &lt;servlet-class&gt;com.config.ContextServletAll&lt;/servlet-class&gt;</span><br><span class="line">    &lt;/servlet&gt;</span><br><span class="line">    &lt;servlet-mapping&gt;</span><br><span class="line">        &lt;servlet-name&gt;ContextServAll&lt;/servlet-name&gt;</span><br><span class="line">        &lt;url-pattern&gt;/ContextServAllUrl&lt;/url-pattern&gt;</span><br><span class="line">    &lt;/servlet-mapping&gt;</span><br></pre></td></tr></table></figure>
<p>关于上方的说明：</p>
<ol>
<li>有以上xml文件可知，<context-param>元素和 <servlet>是同一级元素，而不是其子元素。</servlet></context-param></li>
<li><context-param>元素可以被不同的servlet访问，不单独属于某一个servlet。</context-param></li>
</ol>
<h3 id="Servlet代码"><a href="#Servlet代码" class="headerlink" title="Servlet代码"></a>Servlet代码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">package com.config;</span><br><span class="line">import java.io.*;</span><br><span class="line">import java.util.Enumeration;</span><br><span class="line">import javax.servlet.*;</span><br><span class="line">import javax.servlet.http.*;</span><br><span class="line"></span><br><span class="line">public class ContextServletAll extends HttpServlet &#123;</span><br><span class="line">    private static final long serialVersionUID = 1L;</span><br><span class="line">    protected void doGet(HttpServletRequest request, HttpServletResponse response)</span><br><span class="line">            throws ServletException, IOException &#123;</span><br><span class="line">        response.setContentType(&quot;text/html&quot;);</span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">        // 1.方式1</span><br><span class="line">        ServletContext context = getServletContext();</span><br><span class="line">        // 方式2</span><br><span class="line">        // ServletContext context=getServletConfig().getServletContext(); </span><br><span class="line">        // 下方的方法与上方类似</span><br><span class="line">        String driverName = context.getInitParameter(&quot;dname&quot;);</span><br><span class="line">        out.print(&quot;driver name is = &lt;b&gt;&apos;&quot; + driverName+&quot;&apos;&lt;/b&gt;&quot;+&quot;&lt;br/&gt;&quot;);</span><br><span class="line">        Enumeration&lt;String&gt; e = context.getInitParameterNames();</span><br><span class="line">        String str = &quot;&quot;;</span><br><span class="line">        while (e.hasMoreElements()) &#123;</span><br><span class="line">        	str = e.nextElement();</span><br><span class="line">            out.print(&quot;Name: &quot; + str);</span><br><span class="line">            out.print(&quot; value: &quot; + context.getInitParameter(str)+&quot;&lt;br/&gt;&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="运行结果"><a href="#运行结果" class="headerlink" title="运行结果"></a>运行结果</h3><p><img src="https://s1.ax1x.com/2018/06/05/C7yBq0.png" alt="C7yBq0.png"></p>
<h2 id="Servlet属性设置（待补充）"><a href="#Servlet属性设置（待补充）" class="headerlink" title="Servlet属性设置（待补充）"></a>Servlet属性设置（待补充）</h2>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/Servlet简记/">Servlet简记</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2018/05/31/Servlet重定向/" title="Servlet重定向" itemprop="url">Servlet重定向</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="赵成龙" target="_blank" itemprop="author">赵成龙</a>
		
  <p class="article-time">
    <time datetime="2018-05-31T04:47:44.000Z" itemprop="datePublished"> Published 2018-05-31</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>此处主要记录Servlet重定向的问题。并与转发请求简单比较。</p>
<h2 id="什么是Servlet重定向"><a href="#什么是Servlet重定向" class="headerlink" title="什么是Servlet重定向"></a>什么是Servlet重定向</h2><p>HttpServletResponse接口的sendRedirect()方法可以用于将响应重定向到另一个资源，<strong>资源可能是servlet，jsp或html文件。</strong> <strong>也可以是单纯的一个网址。</strong><br>它可以在服务器内部和外部工作。</p>
<h2 id="forward-和sendRedirect-方法的区别"><a href="#forward-和sendRedirect-方法的区别" class="headerlink" title="forward()和sendRedirect()方法的区别"></a>forward()和sendRedirect()方法的区别</h2><p>RequestDispatcher的forward()方法和HttpServletResponse接口的sendRedirect()方法差异如下：</p>
<p><img src="https://s1.ax1x.com/2018/05/31/CIPGV0.png" alt="CIPGV0.png"></p>
<p>一个由HttpServletRequest发出，一个由HttpServletResponse发出。</p>
<h2 id="实际使用差别"><a href="#实际使用差别" class="headerlink" title="实际使用差别"></a>实际使用差别</h2><p>此处与上一章的转发请求代码使用类似。</p>
<p><strong>LoginServlet 部分代码修改</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">if (passwd.equals(&quot;mypasswd&quot;) &amp;&amp; name.equals(&quot;admin&quot;)) &#123;</span><br><span class="line">   	    out.print(&quot;bye bye bye&quot;);</span><br><span class="line">           response.sendRedirect(&quot;welcomeurl&quot;); //servlet</span><br><span class="line">        // response.sendRedirect(&quot;https://store.meizu.com/&quot;); // website</span><br><span class="line">       &#125; else &#123;</span><br><span class="line">           out.print(&quot;Sorry UserName or Password Error!&quot;); </span><br><span class="line">           response.sendRedirect(&quot;login.html&quot;); //html</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>
<p>运行结果如下：</p>
<p><img src="https://s1.ax1x.com/2018/05/31/CIPoZt.png" alt="CIPoZt.png"></p>
<p><img src="https://s1.ax1x.com/2018/05/31/CIPLRg.png" alt="CIPLRg.png"></p>
<p>从运行结果来看，重定向可以是servlet,html或者是<strong>某个网址</strong>。但是重定向一般不能传递参数。例如图一中就看不到关于name的信息。而这是可以在forward()方法中看到的。</p>
<p>此外自己尝试在转发请求中修改代码如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">if (passwd.equals(&quot;mypasswd&quot;) &amp;&amp; name.equals(&quot;admin&quot;)) &#123;</span><br><span class="line">    	    out.print(&quot;bye bye bye&quot;);</span><br><span class="line">          //  RequestDispatcher rd = request.getRequestDispatcher(&quot;welcomeurl&quot;);</span><br><span class="line">            RequestDispatcher rd = request.getRequestDispatcher(&quot;https://store.meizu.com/&quot;); //a行</span><br><span class="line">            System.out.println(&quot;Username is : &quot;+name);</span><br><span class="line">            rd.forward(request, response);</span><br><span class="line">       </span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
<p>结果运行异常。</p>
<h2 id="另外一个关于重定向的例子-传递参数"><a href="#另外一个关于重定向的例子-传递参数" class="headerlink" title="另外一个关于重定向的例子(传递参数)"></a>另外一个关于重定向的例子(传递参数)</h2><h3 id="web-xml配置文件"><a href="#web-xml配置文件" class="headerlink" title="web.xml配置文件"></a>web.xml配置文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot; xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot; id=&quot;WebApp_ID&quot; version=&quot;3.0&quot;&gt;</span><br><span class="line">  &lt;display-name&gt;&lt;/display-name&gt;</span><br><span class="line">  &lt;description&gt;Welcome to Tomcat&lt;/description&gt;</span><br><span class="line">  &lt;welcome-file-list&gt;</span><br><span class="line">   &lt;welcome-file&gt;meizu.html&lt;/welcome-file&gt;</span><br><span class="line">  &lt;/welcome-file-list&gt;</span><br><span class="line">    &lt;servlet&gt;</span><br><span class="line">        &lt;servlet-name&gt;Searcher&lt;/servlet-name&gt;</span><br><span class="line">        &lt;servlet-class&gt;com.sendRedirectDemo.Searcher&lt;/servlet-class&gt;</span><br><span class="line">    &lt;/servlet&gt;</span><br><span class="line">   &lt;servlet-mapping&gt;</span><br><span class="line">        &lt;servlet-name&gt;Searcher&lt;/servlet-name&gt;</span><br><span class="line">        &lt;url-pattern&gt;/meizusearch&lt;/url-pattern&gt;</span><br><span class="line">    &lt;/servlet-mapping&gt;</span><br><span class="line">&lt;/web-app&gt;</span><br></pre></td></tr></table></figure>
<h3 id="meizu-html"><a href="#meizu-html" class="headerlink" title="meizu.html"></a>meizu.html</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">&lt;title&gt;MeiZu&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div style=&quot;text-align: center;&quot;&gt;</span><br><span class="line">        &lt;form action=&quot;/ServletDemo/meizusearch&quot;&gt;</span><br><span class="line">            关键字：&lt;input type=&quot;text&quot; name=&quot;keyword&quot;&gt; </span><br><span class="line">            &lt;input type=&quot;submit&quot; value=&quot;魅族商城搜索&quot;&gt;</span><br><span class="line">        &lt;/form&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h3 id="Searcher"><a href="#Searcher" class="headerlink" title="Searcher"></a>Searcher</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">package com.sendRedirectDemo;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import javax.servlet.ServletException;</span><br><span class="line">import javax.servlet.http.*;</span><br><span class="line">public class Searcher extends HttpServlet &#123;</span><br><span class="line">    private static final long serialVersionUID = 1L;</span><br><span class="line">    protected void doGet(HttpServletRequest request, HttpServletResponse response)</span><br><span class="line">            throws ServletException, IOException &#123;</span><br><span class="line">         // 获取参数，并将参数作为查询条件添加到重定向的网页地址。</span><br><span class="line">        String keyword = request.getParameter(&quot;keyword&quot;);</span><br><span class="line">        response.sendRedirect(&quot;https://lists.meizu.com/page/search?keyword=&quot; + keyword);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="运行结果"><a href="#运行结果" class="headerlink" title="运行结果"></a>运行结果</h3><p>初始界面</p>
<p><img src="https://s1.ax1x.com/2018/06/05/C7KKj1.png" alt="C7KKj1.png"></p>
<p>输入检索信息后的页面</p>
<p><img src="https://s1.ax1x.com/2018/06/05/C7KajI.png" alt="C7KajI.png"></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/Servlet简记/">Servlet简记</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2018/05/31/Servlet请求转发/" title="Servlet请求转发" itemprop="url">Servlet请求转发</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="赵成龙" target="_blank" itemprop="author">赵成龙</a>
		
  <p class="article-time">
    <time datetime="2018-05-31T02:22:33.000Z" itemprop="datePublished"> Published 2018-05-31</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>此处记录的的主要是使用RequestDispatcher接口来进行请求转发操作。</p>
<h2 id="什么是RequestDispatcher"><a href="#什么是RequestDispatcher" class="headerlink" title="什么是RequestDispatcher"></a>什么是RequestDispatcher</h2><p>   RequestDispatcher接口提供将请求转发送到另一个资源的功能，它<strong>可能是html，servlet或jsp等。</strong> 此接口也可用于包括另一资源的内容。它是servlet协作的一种方式。<br>   RequestDispatcher接口中包括以下两种方法。<br>   <img src="https://s1.ax1x.com/2018/05/31/C5xe4H.png" alt="C5xe4H.png"><br>   两种方法的区别在于:forward（”转发方不直接参与”) include(“转发方直接参与”)。具体差异参考下图：</p>
<p>   <strong>forward()</strong><br>   <img src="https://s1.ax1x.com/2018/05/31/C5x3b8.jpg" alt="C5x3b8.jpg"></p>
<p>   <strong>include()</strong><br>   <img src="https://s1.ax1x.com/2018/05/31/C5xdvq.jpg" alt="C5xdvq.jpg"></p>
<h2 id="如何获取RequestDispatcher对象"><a href="#如何获取RequestDispatcher对象" class="headerlink" title="如何获取RequestDispatcher对象"></a>如何获取RequestDispatcher对象</h2><p>   ServletRequest接口的getRequestDispatcher()方法返回RequestDispatcher的对象。</p>
<pre><code>public RequestDispatcher getRequestDispatcher(String resource);
</code></pre><p>   关于参数resource参考下方的servlet.</p>
<h2 id="使用RequestDispatcher接口的样例"><a href="#使用RequestDispatcher接口的样例" class="headerlink" title="使用RequestDispatcher接口的样例"></a>使用RequestDispatcher接口的样例</h2><p>   在这个例子中，在登陆页面（默认的欢迎页面）中提交表单，在servlet中进行处理。从不同的处理结果，可以看出forward()和include()方法的区别。</p>
<h3 id="关于web-xml"><a href="#关于web-xml" class="headerlink" title="关于web.xml"></a>关于web.xml</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot; xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot; id=&quot;WebApp_ID&quot; version=&quot;3.0&quot;&gt;</span><br><span class="line">  &lt;display-name&gt;ServletDemo&lt;/display-name&gt;</span><br><span class="line">  &lt;description&gt;Welcome to Tomcat&lt;/description&gt;</span><br><span class="line">  &lt;welcome-file-list&gt;</span><br><span class="line">    &lt;welcome-file&gt;login.html&lt;/welcome-file&gt;</span><br><span class="line">  &lt;/welcome-file-list&gt;</span><br><span class="line">   &lt;servlet&gt;</span><br><span class="line">        &lt;servlet-name&gt;Login&lt;/servlet-name&gt;</span><br><span class="line">        &lt;servlet-class&gt;com.dispatcher.LoginServlet&lt;/servlet-class&gt;</span><br><span class="line">    &lt;/servlet&gt;</span><br><span class="line">    &lt;servlet&gt;</span><br><span class="line">        &lt;servlet-name&gt;WelcomeServlet&lt;/servlet-name&gt;</span><br><span class="line">        &lt;servlet-class&gt;com.dispatcher.WelcomeServlet&lt;/servlet-class&gt;</span><br><span class="line">    &lt;/servlet&gt;</span><br><span class="line">    &lt;servlet-mapping&gt;</span><br><span class="line">        &lt;servlet-name&gt;Login&lt;/servlet-name&gt;</span><br><span class="line">        &lt;url-pattern&gt;/loginurl&lt;/url-pattern&gt;</span><br><span class="line">    &lt;/servlet-mapping&gt;</span><br><span class="line">    &lt;servlet-mapping&gt;</span><br><span class="line">        &lt;servlet-name&gt;WelcomeServlet&lt;/servlet-name&gt;</span><br><span class="line">        &lt;url-pattern&gt;/welcomeurl&lt;/url-pattern&gt;</span><br><span class="line">    &lt;/servlet-mapping&gt;</span><br><span class="line">&lt;/web-app&gt;</span><br></pre></td></tr></table></figure>
<h3 id="关于login-html"><a href="#关于login-html" class="headerlink" title="关于login.html"></a>关于login.html</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">&lt;title&gt;登录&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div style=&quot;text-align:center;&quot;&gt;</span><br><span class="line">    &lt;form action=&quot;/ServletDemo/loginurl&quot; method=&quot;get&quot;&gt;</span><br><span class="line">        用户名:&lt;input type=&quot;text&quot; name=&quot;userName&quot; /&gt;&lt;br /&gt; </span><br><span class="line">        密码:&lt;input type=&quot;password&quot; name=&quot;userPass&quot; /&gt;&lt;br /&gt; </span><br><span class="line">        &lt;input type=&quot;submit&quot; value=&quot;登录&quot; /&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>关于xml，注意以下两点：</p>
<ol>
<li>form表单中的method属性，此处指定方法类型为get,因此在相关的Servlet中也应该使用doGet()来处理。如果设置为post,则应该使用doPost()来处理。如果没有设定该属性，默认方法类型为get</li>
<li>action=”/ServletDemo/loginurl” 其中的格式：/项目名称/url</li>
</ol>
<h3 id="关于Servlet"><a href="#关于Servlet" class="headerlink" title="关于Servlet"></a>关于Servlet</h3><p><strong>LoginServlet</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">package com.dispatcher;</span><br><span class="line">import java.io.*;</span><br><span class="line">import javax.servlet.*;</span><br><span class="line">import javax.servlet.http.*;</span><br><span class="line">public class LoginServlet extends HttpServlet &#123;</span><br><span class="line">    private static final long serialVersionUID = 1L;</span><br><span class="line">    protected void doGet(HttpServletRequest request, HttpServletResponse response)</span><br><span class="line">            throws ServletException, IOException &#123;</span><br><span class="line">        response.setCharacterEncoding(&quot;utf-8&quot;);</span><br><span class="line">        response.setContentType(&quot;text/html;charset=utf-8&quot;);</span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line"></span><br><span class="line">        String name = request.getParameter(&quot;userName&quot;);</span><br><span class="line">        String passwd = request.getParameter(&quot;userPass&quot;);</span><br><span class="line"></span><br><span class="line">       if (passwd.equals(&quot;mypasswd&quot;) &amp;&amp; name.equals(&quot;admin&quot;)) &#123;</span><br><span class="line">            out.print(&quot;bye bye bye&quot;); //c</span><br><span class="line">            RequestDispatcher rd = request.getRequestDispatcher(&quot;welcomeurl&quot;); //a行</span><br><span class="line">            System.out.println(&quot;Username is : &quot;+name);</span><br><span class="line">            rd.forward(request, response);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            out.print(&quot;Sorry UserName or Password Error!&quot;); //c</span><br><span class="line">            RequestDispatcher rd = request.getRequestDispatcher(&quot;login.html&quot;);// b行</span><br><span class="line">            rd.include(request, response);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>关于上方的说明：</p>
<ol>
<li>上方a行，b行代码表明RequestDispatcher接口准发的对象可能是html，servlet或jsp等。</li>
<li>如果转发的是servlet,那么应该使用与该servlet相对应的<url-pattern>/loginurl</url-pattern></li>
<li>上方的c行代码主要是为了对比。</li>
</ol>
<p><strong>WelcomeServlet</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">package com.dispatcher;</span><br><span class="line">import java.io.*;</span><br><span class="line">import javax.servlet.*;</span><br><span class="line">import javax.servlet.http.*;</span><br><span class="line">public class WelcomeServlet extends HttpServlet &#123;</span><br><span class="line">    private static final long serialVersionUID = 1L;</span><br><span class="line">    public void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</span><br><span class="line">    	 response.setCharacterEncoding(&quot;utf-8&quot;);//设置服务器端编码</span><br><span class="line">         response.setContentType(&quot;text/html;charset=utf-8&quot;);</span><br><span class="line">         String name = request.getParameter(&quot;userName&quot;);</span><br><span class="line">         if(name==null || name==&quot;&quot;) &#123;</span><br><span class="line">             name = &quot;&quot;;</span><br><span class="line">         &#125;</span><br><span class="line">         PrintWriter out = response.getWriter();</span><br><span class="line">         //String chset = response.getCharacterEncoding(); </span><br><span class="line">         out.print(&quot;&lt;!DOCTYPE html&gt;\r\n&quot; + </span><br><span class="line">                 &quot;&lt;html&gt;\r\n&quot; + </span><br><span class="line">                 &quot;&lt;head&gt;\r\n&quot; + </span><br><span class="line">                 &quot;&lt;meta charset=\&quot;UTF-8\&quot;&gt;\r\n&quot; + </span><br><span class="line">                 &quot;&lt;title&gt;Success-Login&lt;/title&gt;\r\n&quot; + </span><br><span class="line">                 &quot;&lt;/head&gt;\r\n&quot; + </span><br><span class="line">                 &quot;&lt;body&gt;&quot;);</span><br><span class="line">         out.print(&quot;&lt;b&gt;Well Done ~ &lt;/b&gt;&lt;hr/&gt;&quot;);</span><br><span class="line">         out.print(&quot;Welcome, &quot; + name);</span><br><span class="line">         out.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="运行结果"><a href="#运行结果" class="headerlink" title="运行结果"></a>运行结果</h3><p><strong>登陆界面</strong></p>
<p><img src="https://s1.ax1x.com/2018/05/31/CI9lWQ.png" alt="CI9lWQ.png"></p>
<p><strong>登陆验证通过，调用forward()方法</strong></p>
<p><img src="https://s1.ax1x.com/2018/05/31/CI91zj.png" alt="CI91zj.png"></p>
<p><strong>登陆验证没有通过，调用include()方法</strong></p>
<p><img src="https://s1.ax1x.com/2018/05/31/CI98Qs.png" alt="CI98Qs.png"></p>
<p>从图2来看，调用forward()方法并不会直接将自身的内容传递给另外一个servlet（例如上方添加的<strong>c行代码并不会显示</strong>）,但是调用include()方法会直接传递（<strong>c行代码在页面中显示。</strong>）</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/Servlet简记/">Servlet简记</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2018/05/29/ServletRequest接口/" title="ServletRequest接口" itemprop="url">ServletRequest接口</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="赵成龙" target="_blank" itemprop="author">赵成龙</a>
		
  <p class="article-time">
    <time datetime="2018-05-29T08:17:38.000Z" itemprop="datePublished"> Published 2018-05-29</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>Servlet ServletRequest接口的简介和常用方法的使用说明</p>
<h2 id="什么是ServletRequest接口"><a href="#什么是ServletRequest接口" class="headerlink" title="什么是ServletRequest接口"></a>什么是ServletRequest接口</h2><p>ServletRequest的对象用于向Servlet提供客户端请求信息，如内容类型，内容长度，参数名称和值，标题信息，属性等。</p>
<p>常用方法如下所示：<br><img src="https://s1.ax1x.com/2018/05/29/C5PHAK.png" alt="C5PHAK.png"></p>
<h2 id="ServletRequest-实例"><a href="#ServletRequest-实例" class="headerlink" title="ServletRequest 实例"></a>ServletRequest 实例</h2><p>该示例包含两个Servlet,通过在欢迎页中传递参数在不同的servlet中处理。</p>
<h3 id="servlet代码"><a href="#servlet代码" class="headerlink" title="servlet代码"></a>servlet代码</h3><p>ServletRequest.java代码如下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.request;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServletRequestDemo</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        response.setContentType(<span class="string">"text/html"</span>);      <span class="comment">// 返回请求实体数据的网络媒体类型</span></span><br><span class="line">        PrintWriter pw = response.getWriter();</span><br><span class="line">        <span class="comment">// 1.通过名称获取值</span></span><br><span class="line">        String name = request.getParameter(<span class="string">"name"</span>);<span class="comment">// will return value  通过名称获取参数的值。</span></span><br><span class="line">        <span class="comment">//2. 通过名称获取数值数组 ------常用于多选框</span></span><br><span class="line">        String[] Fruits=request.getParameterValues(<span class="string">"Fruit"</span>);</span><br><span class="line">        String[] seaFood=request.getParameterValues(<span class="string">"seaFood"</span>);</span><br><span class="line">        pw.println(<span class="string">"Welcome "</span> + name+<span class="string">"&lt;br&gt;"</span>);</span><br><span class="line">        pw.println(<span class="string">"i want to eat friuts:"</span>+<span class="string">"&lt;br&gt;"</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">        	<span class="keyword">for</span>(String fruit:Fruits)&#123;</span><br><span class="line">            	pw.println(fruit+ <span class="string">"&lt;br&gt;"</span>);</span><br><span class="line">            &#125;;</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			<span class="comment">// <span class="doctag">TODO:</span> handle exception</span></span><br><span class="line">			pw.println(<span class="string">"你没选择任何水果"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">      </span><br><span class="line">        pw.println(<span class="string">"i want to eat seaFoods:"</span>+ <span class="string">"&lt;br&gt;"</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">        	 <span class="keyword">for</span>(String sea:seaFood)&#123;</span><br><span class="line">              pw.println(sea+ <span class="string">"&lt;br&gt;"</span>);</span><br><span class="line">            &#125;;</span><br><span class="line">			</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			<span class="comment">// <span class="doctag">TODO:</span> handle exception</span></span><br><span class="line">			pw.println(<span class="string">"你没选择任何海鲜"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">        pw.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>HeaderServlet.java代码如下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.request;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Enumeration;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HeaderServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">    <span class="meta">@SuppressWarnings</span>(<span class="string">"rawtypes"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        response.setContentType(<span class="string">"text/html"</span>);</span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">        <span class="comment">// 接口的getHeaderNames()方法返回一个包含所有头名称的Enumeration对象。</span></span><br><span class="line">        Enumeration enums = request.getHeaderNames();</span><br><span class="line">        <span class="keyword">while</span> (enums.hasMoreElements()) &#123;</span><br><span class="line">            String headerName = (String) enums.nextElement();</span><br><span class="line">            <span class="comment">// 接口的getHeader()方法返回给定头名称的头值。</span></span><br><span class="line">            String headerValue = request.getHeader(headerName);</span><br><span class="line">            out.print(<span class="string">"&lt;b&gt;"</span> + headerName + <span class="string">"&lt;/b&gt;: "</span>);</span><br><span class="line">            out.println(headerValue + <span class="string">"&lt;br/&gt;"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="关于web-xml的配置"><a href="#关于web-xml的配置" class="headerlink" title="关于web.xml的配置"></a>关于web.xml的配置</h3><p>配置文件如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot; xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot; id=&quot;WebApp_ID&quot; version=&quot;3.0&quot;&gt;</span><br><span class="line">  &lt;display-name&gt;InterfaceServlet&lt;/display-name&gt;</span><br><span class="line">  &lt;description&gt;Welcome to Tomcat&lt;/description&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;welcome-file-list&gt;</span><br><span class="line">    &lt;welcome-file&gt;index.html&lt;/welcome-file&gt;</span><br><span class="line">  &lt;/welcome-file-list&gt;</span><br><span class="line">   </span><br><span class="line">  &lt;!-- 演示提交表单获取数据  --&gt;</span><br><span class="line">  &lt;servlet&gt;</span><br><span class="line">    &lt;servlet-name&gt;ServletRequestDemo&lt;/servlet-name&gt;</span><br><span class="line">    &lt;servlet-class&gt;com.request.ServletRequestDemo&lt;/servlet-class&gt;</span><br><span class="line">  &lt;/servlet&gt;</span><br><span class="line"></span><br><span class="line">  &lt;servlet-mapping&gt;</span><br><span class="line">    &lt;servlet-name&gt;ServletRequestDemo&lt;/servlet-name&gt;</span><br><span class="line">    &lt;url-pattern&gt;/ServletRequestDemoUrl&lt;/url-pattern&gt;</span><br><span class="line">  &lt;/servlet-mapping&gt; </span><br><span class="line">  &lt;!-- 演示获取头信息的示例 --&gt;</span><br><span class="line">  &lt;servlet&gt;</span><br><span class="line">    &lt;servlet-name&gt;HeaderServlet&lt;/servlet-name&gt;</span><br><span class="line">    &lt;servlet-class&gt;com.request.HeaderServlet&lt;/servlet-class&gt;</span><br><span class="line">  &lt;/servlet&gt;</span><br><span class="line"></span><br><span class="line">  &lt;servlet-mapping&gt;</span><br><span class="line">    &lt;servlet-name&gt;HeaderServlet&lt;/servlet-name&gt;</span><br><span class="line">    &lt;url-pattern&gt;/HeaderServletUrl&lt;/url-pattern&gt;</span><br><span class="line">  &lt;/servlet-mapping&gt; </span><br><span class="line">  </span><br><span class="line">  &lt;/web-app&gt;</span><br></pre></td></tr></table></figure>
<h3 id="自定义欢迎页"><a href="#自定义欢迎页" class="headerlink" title="自定义欢迎页"></a>自定义欢迎页</h3><p>欢迎页代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">&lt;title&gt;Welcome - ServletRequest&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">   &lt;div style=&quot;text-align: center;color:red;&quot;&gt;</span><br><span class="line">        &lt;form action=&quot;/ServletDemo/ServletRequestDemoUrl&quot;&gt;</span><br><span class="line">            名字：&lt;input type=&quot;text&quot; name=&quot;name&quot;&gt;&lt;br /&gt;&lt;br /&gt;</span><br><span class="line">          您喜欢的水果？&lt;br /&gt;&lt;br /&gt;</span><br><span class="line">&lt;label&gt;&lt;input name=&quot;Fruit&quot; type=&quot;checkbox&quot; value=&quot;apple&quot; /&gt;苹果 &lt;/label&gt;</span><br><span class="line">&lt;label&gt;&lt;input name=&quot;Fruit&quot; type=&quot;checkbox&quot; value=&quot;peach&quot; /&gt;桃子 &lt;/label&gt;</span><br><span class="line">&lt;label&gt;&lt;input name=&quot;Fruit&quot; type=&quot;checkbox&quot; value=&quot;banana&quot; /&gt;香蕉 &lt;/label&gt;</span><br><span class="line">&lt;label&gt;&lt;input name=&quot;Fruit&quot; type=&quot;checkbox&quot; value=&quot;li&quot; /&gt;梨 &lt;/label&gt;&lt;br /&gt;&lt;br /&gt;</span><br><span class="line">         您喜欢的海鲜？&lt;br /&gt;&lt;br /&gt;</span><br><span class="line">&lt;label&gt;&lt;input name=&quot;seaFood&quot; type=&quot;checkbox&quot; value=&quot;longxia&quot; /&gt;龙虾 &lt;/label&gt;</span><br><span class="line">&lt;label&gt;&lt;input name=&quot;seaFood&quot; type=&quot;checkbox&quot; value=&quot;ppxia &quot; /&gt;皮皮虾 &lt;/label&gt;</span><br><span class="line">&lt;label&gt;&lt;input name=&quot;seaFood&quot; type=&quot;checkbox&quot; value=&quot;jwxia&quot; /&gt;基围虾 &lt;/label&gt;</span><br><span class="line">&lt;label&gt;&lt;input name=&quot;seaFood&quot; type=&quot;checkbox&quot; value=&quot;yuFish&quot; /&gt;鳗鱼 &lt;/label&gt;</span><br><span class="line">       &lt;input type=&quot;submit&quot; value=&quot;提交&quot;&gt;</span><br><span class="line">        &lt;/form&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;div style=&quot;text-align: center;color:green&quot;&gt;</span><br><span class="line">        请&lt;a href=&quot;/ServletDemo/HeaderServletUrl?key1=sky&quot;&gt;点击这里&lt;/a&gt;查看所有报头信息</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    </span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>关于上方的说明：上方包括两部分内容，分别由不同的servlet处理。自己需要注意以下两点</p>
<ol>
<li>html标签的部分要会用。如文本框，复选框（name，type，value。龙虾是显示的内容，获取的值是内部的value）</li>
<li>设定提交表单的action以及链接跳转时需要注意格式：/项目名/web.xml定义的url</li>
</ol>
<h3 id="运行截图："><a href="#运行截图：" class="headerlink" title="运行截图："></a>运行截图：</h3><p>启动页面</p>
<p><img src="https://s1.ax1x.com/2018/05/29/C5kufU.png" alt="C5kufU.png"></p>
<p>输入信息，点击提交后</p>
<p><img src="https://s1.ax1x.com/2018/05/29/C5kdpD.png" alt="C5kdpD.png"></p>
<p>在启动页面，点击头信息</p>
<p><img src="https://s1.ax1x.com/2018/05/29/C5kw1e.png" alt="C5kw1e.png"></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/Servlet简记/">Servlet简记</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2018/05/29/war包和web-xml的部分讲解/" title="war包和web.xml的部分讲解" itemprop="url">war包和web.xml的部分讲解</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="赵成龙" target="_blank" itemprop="author">赵成龙</a>
		
  <p class="article-time">
    <time datetime="2018-05-29T07:35:04.000Z" itemprop="datePublished"> Published 2018-05-29</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>此处记录Servlet中的war包以及web.xml中的部分内容</p>
<h2 id="关于WAR包"><a href="#关于WAR包" class="headerlink" title="关于WAR包"></a>关于WAR包</h2><h3 id="什么是WAR包"><a href="#什么是WAR包" class="headerlink" title="什么是WAR包"></a>什么是WAR包</h3><p>Web存档(war)文件包含Web应用程序的所有内容。它减少了传输文件所需要的时间。一个war(web archive)文件包含一个web项目的文件。它可能有servlet，xml，jsp，image，html，css，js等文件。</p>
<h3 id="WAR包的优点"><a href="#WAR包的优点" class="headerlink" title="WAR包的优点"></a>WAR包的优点</h3><p>war文件将所有文件合并为一个单位。 所以在将文件从客户端传输到服务器时需要更少的时间。</p>
<h3 id="WAR包的导出方法"><a href="#WAR包的导出方法" class="headerlink" title="WAR包的导出方法"></a>WAR包的导出方法</h3><p>此处使用Eclipse导出War文件。在项目名称上点击右键，选择：Export-&gt;War File，在弹出的对话框选选保存的位置。然后将该文件复制到tomcat下面的webapps目录下。在bin文件夹下启动项目，然后在浏览器中访问（访问地址与eclipse中的访问地址一致。）。</p>
<h2 id="关于web-xml中的welcome-file-list"><a href="#关于web-xml中的welcome-file-list" class="headerlink" title="关于web.xml中的welcome-file-list"></a>关于web.xml中的welcome-file-list</h2><h3 id="welcome-file-list简介"><a href="#welcome-file-list简介" class="headerlink" title="welcome-file-list简介"></a>welcome-file-list简介</h3><p>在web.xml文件中的web-app块的welcome-file-list子元素用于定义欢迎文件列表。它的子元素是welcome-file，<strong>用于定义欢迎文件(即默认打开的页面)</strong>。<br><strong>如果不指定任何文件名，欢迎文件是服务器自动调用的文件</strong>。例如如果在浏览器中只是输入了项目名称，但是并没有指定相关的URL,那么此时就会自动跳转到欢迎文件。</p>
<h3 id="服务器查找欢迎文件顺序如下（todo）"><a href="#服务器查找欢迎文件顺序如下（todo）" class="headerlink" title="服务器查找欢迎文件顺序如下（todo）"></a>服务器查找欢迎文件顺序如下（todo）</h3><ol>
<li>web.xml文件中的welcome-file-list指定的文件</li>
<li>index.html</li>
<li>index.jsp</li>
</ol>
<p>如果在web.xml中指定了welcome-file，并且所有文件index.html和index.jsp都存在，那么优先级将转到welcome-file。<br>如果web.xml文件中不存在welcome-file-list项，那么优先级到index.html文件，然后是index.jsp文件。</p>
<p>在之前的操作中，由于对与欢迎文件的查找顺序不了解，出现了一点问题，此处记录纠正。</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/Servlet简记/">Servlet简记</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2018/05/29/Servlet的几种实现方式/" title="Servlet的几种实现方式" itemprop="url">Servlet的几种实现方式</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="赵成龙" target="_blank" itemprop="author">赵成龙</a>
		
  <p class="article-time">
    <time datetime="2018-05-29T07:18:09.000Z" itemprop="datePublished"> Published 2018-05-29</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>  基于Servlet的实现</p>
<h2 id="实现servlet接口"><a href="#实现servlet接口" class="headerlink" title="实现servlet接口"></a>实现servlet接口</h2><h3 id="servlet接口简介"><a href="#servlet接口简介" class="headerlink" title="servlet接口简介"></a>servlet接口简介</h3><p>Servlet接口有5种方法。分别为：init，service和destroy是servlet的生命周期方法。这些方法由web容器调用。各个方法作用如下图所示。</p>
<p><img src="https://s1.ax1x.com/2018/05/29/C4Lene.png" alt="C4Lene.png"></p>
<h3 id="代码实现实例"><a href="#代码实现实例" class="headerlink" title="代码实现实例"></a>代码实现实例</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yiibai;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyServlet</span> <span class="keyword">implements</span> <span class="title">Servlet</span> </span>&#123;</span><br><span class="line">    ServletConfig config = <span class="keyword">null</span>;</span><br><span class="line">    <span class="comment">//  init方法,由web容器仅调用一次</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig config)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.config = config;</span><br><span class="line">        System.out.println(<span class="string">"servlet is initialized"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 为传入的请求提供相应。比如此处的请求显示的页面中的内容就是该方法中的内容</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest req, ServletResponse res)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">        res.setContentType(<span class="string">"text/html"</span>);</span><br><span class="line">        PrintWriter out = res.getWriter();</span><br><span class="line">        out.print(<span class="string">"&lt;html&gt;&lt;body&gt;"</span>);</span><br><span class="line">        out.print(<span class="string">"&lt;div style=\"text-align:center;\"&gt;&lt;h2&gt;hello simple servlet&lt;/h2&gt;&lt;/div&gt;"</span>);</span><br><span class="line">        out.print(<span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"servlet is destroyed"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> ServletConfig <span class="title">getServletConfig</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> config;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getServletInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"copyright 2012-2020"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="配置文件（仅显示部分）"><a href="#配置文件（仅显示部分）" class="headerlink" title="配置文件（仅显示部分）"></a>配置文件（仅显示部分）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;servlet&gt;</span><br><span class="line">    &lt;description&gt;&lt;/description&gt;</span><br><span class="line">    &lt;display-name&gt;MyServlet&lt;/display-name&gt;&lt;!-- // 类的显示名称 --&gt;</span><br><span class="line">    &lt;servlet-name&gt;MyServlet&lt;/servlet-name&gt;&lt;!-- // 类的别名 --&gt;</span><br><span class="line">    &lt;servlet-class&gt;com.yiibai.MyServlet&lt;/servlet-class&gt;&lt;!-- // 类的名称 --&gt;</span><br><span class="line">  &lt;/servlet&gt;</span><br><span class="line">  &lt;servlet-mapping&gt;</span><br><span class="line">    &lt;servlet-name&gt;MyServlet&lt;/servlet-name&gt;// 类的别名</span><br><span class="line">    &lt;url-pattern&gt;/MyServletDemo&lt;/url-pattern&gt;// 请求此类的对应URL</span><br><span class="line">  &lt;/servlet-mapping&gt;</span><br></pre></td></tr></table></figure>
<p>关于配置文件主要记住以下内容：</p>
<pre><code>&lt;servlet-name&gt;是&lt;servlet&gt;的子元素，表示servlet的名称。
&lt;servlet-class&gt;是&lt;servlet&gt;的子元素，表示servlet的类。
&lt;servlet-mapping&gt;是&lt;web-app&gt;的子元素。它用于映射servlet。
&lt;url-pattern&gt;是&lt;servlet-mapping&gt;的子元素。客户端使用此模式来调用servlet。
</code></pre><p>也就是servlet-class指定某一个确定的类，该类有一个名称servlet-name（一般与类名相同）。在servlet-mapping中使用自定义的url来使用相关的servlet。）</p>
<h3 id="运行结果如图"><a href="#运行结果如图" class="headerlink" title="运行结果如图"></a>运行结果如图</h3><p><img src="https://s1.ax1x.com/2018/05/29/C4ORsS.png" alt="C4ORsS.png"></p>
<h2 id="继承GenericServlet类"><a href="#继承GenericServlet类" class="headerlink" title="继承GenericServlet类"></a>继承GenericServlet类</h2><h3 id="GenericServlet类简介"><a href="#GenericServlet类简介" class="headerlink" title="GenericServlet类简介"></a>GenericServlet类简介</h3><p>Servlet接口为所有servlet提供常见的行为。<br>GenericServlet类实现了Servlet，ServletConfig和Serializable接口。它提供除了service方法之外，还实现了这些接口的所有方法。<br>GenericServlet类可以处理任何类型的请求，因此它与协议无关。<br><strong>可以通过继承GenericServlet类并提供服务方法的实现来创建通用的servlet。</strong></p>
<h3 id="代码实现实例-1"><a href="#代码实现实例-1" class="headerlink" title="代码实现实例"></a>代码实现实例</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yiibai;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyServlet</span> <span class="keyword">extends</span> <span class="title">GenericServlet</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest req, ServletResponse res)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">        res.setContentType(<span class="string">"text/html"</span>);</span><br><span class="line">        PrintWriter out = res.getWriter();</span><br><span class="line">        out.print(<span class="string">"&lt;html&gt;&lt;body&gt;"</span>);</span><br><span class="line">        out.print(<span class="string">"&lt;div style=\"text-align:center;\"&gt;&lt;h2&gt;hello generic servlet&lt;/h2&gt;&lt;/div&gt;"</span>);</span><br><span class="line">        out.print(<span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="继承-HttpServlet类"><a href="#继承-HttpServlet类" class="headerlink" title="继承 HttpServlet类"></a>继承 HttpServlet类</h2><h3 id="HttpServlet类简介"><a href="#HttpServlet类简介" class="headerlink" title="HttpServlet类简介"></a>HttpServlet类简介</h3><p>HttpServlet类扩展了GenericServlet类并实现了Serializable接口。它提供了http特定的方法，如:doGet，doPost，doHead，doTrace等。</p>
<h3 id="代码实现实例-2"><a href="#代码实现实例-2" class="headerlink" title="代码实现实例"></a>代码实现实例</h3><pre><code>参考上一章的入门示例。该示例基于HttpServlet类。
</code></pre>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/Servlet简记/">Servlet简记</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2018/05/29/Servlet入门程序/" title="Servlet入门程序" itemprop="url">Servlet入门程序</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="赵成龙" target="_blank" itemprop="author">赵成龙</a>
		
  <p class="article-time">
    <time datetime="2018-05-29T02:50:00.000Z" itemprop="datePublished"> Published 2018-05-29</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>Servlet入门程序：此处入门程序不采用IDE或者ECLIPSE的方式运行，而是在webapps中运行。主要包括以下几个步骤。</p>
<h2 id="创建一个Servlet"><a href="#创建一个Servlet" class="headerlink" title="创建一个Servlet"></a>创建一个Servlet</h2><p> 与之前的例子相呼应，此处采用扩展HttpServlet抽象类的方式创建Servlet。代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">import javax.servlet.*;</span><br><span class="line">import javax.servlet.http.*;</span><br><span class="line">import java.io.*;</span><br><span class="line"></span><br><span class="line">public class MyServlet extends HttpServlet</span><br><span class="line">&#123;</span><br><span class="line"> public void doGet(HttpServletRequest request,HttpServletResponse response) </span><br><span class="line">                     throws ServletException, IOException </span><br><span class="line"> &#123;</span><br><span class="line">   response.setContentType(&quot;text/html&quot;);</span><br><span class="line">   PrintWriter out = response.getWriter();</span><br><span class="line">   out.println(&quot;&lt;html&gt;&lt;body&gt;&quot;);</span><br><span class="line">   out.println(&quot;&lt;h2 style=&apos;text-align:center&apos;&gt;Hello Servlet ~&lt;/h2&gt;&quot;);</span><br><span class="line">   out.println(&quot;&lt;/body&gt;&lt;/html&gt;&quot;);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>将该文件放在F:\Demo\First目录下</p>
<h2 id="编译Servlet类"><a href="#编译Servlet类" class="headerlink" title="编译Servlet类"></a>编译Servlet类</h2><pre><code>关于编译的说明：要编译Servlet，需要一个JAR文件。不同的服务器需要不同的JAR文件。在Apache Tomcat服务器需要的是servlet-api.jar文件来编译servlet类。（该jar文件可以直接在tomcat的lib目录下找到。）
</code></pre><p>步骤如下：</p>
<ol>
<li>将上述jar包放在一个目录中（此处放置的位置是F:\Demo\library）</li>
<li><p>在MyServlet所在的目录执行以下命令：</p>
<pre><code>F:\Demo\First&gt; javac -Djava.ext.dirs=F:\Demo\library MyServlet.java
</code></pre></li>
<li>将当前目录下生成的类文件：MyServlet.class 粘贴到F:\Demo\First\WEB-INF\classes目录中。</li>
</ol>
<h2 id="创建部署描述符"><a href="#创建部署描述符" class="headerlink" title="创建部署描述符"></a>创建部署描述符</h2><p>   部署描述符(DD)是由Web容器用于运行Servlet和JSP页面的XML文档。也就是web.xml文件。其作用如下：</p>
<ol>
<li>将URL映射到Servlet类</li>
<li>初始化参数</li>
<li>定义错误页面</li>
<li>安全角色</li>
<li>声明标签库<br>web.xml代码如下：</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot; xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot; id=&quot;WebApp_ID&quot; version=&quot;2.5&quot;&gt;</span><br><span class="line">  &lt;display-name&gt;MyFirstServlet&lt;/display-name&gt;</span><br><span class="line">  &lt;welcome-file-list&gt;</span><br><span class="line">    &lt;!--// 默认主页--&gt;</span><br><span class="line">    &lt;welcome-file&gt;index.html&lt;/welcome-file&gt;</span><br><span class="line">    &lt;welcome-file&gt;index.html&lt;/welcome-file&gt;</span><br><span class="line">    &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;</span><br><span class="line">    &lt;welcome-file&gt;default.html&lt;/welcome-file&gt;</span><br><span class="line">    &lt;welcome-file&gt;default.html&lt;/welcome-file&gt;</span><br><span class="line">    &lt;welcome-file&gt;default.jsp&lt;/welcome-file&gt;</span><br><span class="line">  &lt;/welcome-file-list&gt;</span><br><span class="line">  &lt;servlet&gt;</span><br><span class="line">    &lt;description&gt;&lt;/description&gt;</span><br><span class="line">    &lt;display-name&gt;MyServlet&lt;/display-name&gt;&lt;!--// 类的显示名称 --&gt;</span><br><span class="line">    &lt;servlet-name&gt;MyServlet&lt;/servlet-name&gt;&lt;!--// 类的别名 --&gt;</span><br><span class="line">    &lt;servlet-class&gt;MyServlet&lt;/servlet-class&gt;&lt;!--// 类的名称 --&gt;</span><br><span class="line">  &lt;/servlet&gt;</span><br><span class="line">  &lt;servlet-mapping&gt;</span><br><span class="line">    &lt;servlet-name&gt;MyServlet&lt;/servlet-name&gt;&lt;!--// 类的别名 --&gt;</span><br><span class="line">    &lt;url-pattern&gt;/hello&lt;/url-pattern&gt;&lt;!--// 请求此类的对应URL --&gt;</span><br><span class="line">  &lt;/servlet-mapping&gt;</span><br><span class="line">&lt;/web-app&gt;</span><br></pre></td></tr></table></figure>
<h2 id="启动服务器并部署应用程序"><a href="#启动服务器并部署应用程序" class="headerlink" title="启动服务器并部署应用程序"></a>启动服务器并部署应用程序</h2><pre><code>步骤如下：
</code></pre><ol>
<li>将目录F:\Demo\First 拷贝到 tomcat下的webapps目录下</li>
<li>在tomcat的bin目录下启动项目</li>
<li>访问http:localhost:8080/First/hello</li>
</ol>
<h2 id="关于上方的说明"><a href="#关于上方的说明" class="headerlink" title="关于上方的说明"></a>关于上方的说明</h2><pre><code>有点问题（todo）
</code></pre>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/Servlet简记/">Servlet简记</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2018/05/25/Java设计模式简记/" title="Java设计模式简记" itemprop="url">Java设计模式简记</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="赵成龙" target="_blank" itemprop="author">赵成龙</a>
		
  <p class="article-time">
    <time datetime="2018-05-25T08:01:37.000Z" itemprop="datePublished"> Published 2018-05-25</time>
    
  </p>
</header>
    <div class="article-content">
        
        
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/设计模式/">设计模式</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>







  <nav id="page-nav" class="clearfix">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">Next<span></span></a>
  </nav>

</div>
      <div class="openaside"><a class="navbutton" href="#" title="Show Sidebar"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Hide Sidebar"></a></div>
<aside class="clearfix">

  


  

  
<div class="tagslist">
	<p class="asidetitle">Tags</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/Servlet简记/" title="Servlet简记">Servlet简记<sup>10</sup></a></li>
			
		
			
				<li><a href="/tags/SpringMVC/" title="SpringMVC">SpringMVC<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/Spring框架简记/" title="Spring框架简记">Spring框架简记<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/辅助类简记/" title="辅助类简记">辅助类简记<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/设计模式/" title="设计模式">设计模式<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/算法/" title="算法">算法<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/数据库简记/" title="数据库简记">数据库简记<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/博客搭建简记/" title="博客搭建简记">博客搭建简记<sup>1</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">Links</p>
    <ul>
        
          <li>
            
            	<a href="https://coderq.com" target="_blank" title="一个面向程序员交流分享的新一代社区">码农圈</a>
            
          </li>
        
          <li>
            
            	<a href="http://wuchong.me" target="_blank" title="Jark&#39;s Blog">Jark&#39;s Blog</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS</a>
</div>

  <div class="weiboshow">
  <p class="asidetitle">Weibo</p>
    <iframe width="100%" height="119" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=119&fansRow=2&ptype=1&speed=0&skin=9&isTitle=1&noborder=1&isWeibo=0&isFans=0&uid=&verifier=b3593ceb&dpc=1"></iframe>
</div>


</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello ,I&#39;m Larry Page in Google. <br/>
			This is my blog,believe it or not.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/2176287895" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2018 
		
		<a href="/about" target="_blank" title="赵成龙">赵成龙</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>












<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e6d1f421bbc9962127a50488f9ed37d1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="Back to Top"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
 </html>
